<HTML><HEAD><META CONTENT="text/html; charset=ISO-8859-1" HTTP-EQUIV="Content-Type"/><TITLE>EMMA Coverage Report</TITLE><STYLE TYPE="text/css"> TABLE,TD,TH {border-style:solid; border-color:black;} TD,TH {background:white;margin:0;line-height:100%;padding-left:0.5em;padding-right:0.5em;} TD {border-width:0 1px 0 0;} TH {border-width:1px 1px 1px 0;} TR TD.h {color:red;} TABLE {border-spacing:0; border-collapse:collapse;border-width:0 0 1px 1px;} P,H1,H2,H3,TH {font-family:verdana,arial,sans-serif;font-size:10pt;} TD {font-family:courier,monospace;font-size:10pt;} TABLE.hdft {border-spacing:0;border-collapse:collapse;border-style:none;} TABLE.hdft TH,TABLE.hdft TD {border-style:none;line-height:normal;} TABLE.hdft TH.tl,TABLE.hdft TD.tl {background:#6699CC;color:white;} TABLE.hdft TD.nv {background:#6633DD;color:white;} .nv A:link {color:white;} .nv A:visited {color:white;} .nv A:active {color:yellow;} TABLE.hdft A:link {color:white;} TABLE.hdft A:visited {color:white;} TABLE.hdft A:active {color:yellow;} .in {color:#356085;} TABLE.s TD {padding-left:0.25em;padding-right:0.25em;} TABLE.s TD.l {padding-left:0.25em;padding-right:0.25em;text-align:right;background:#F0F0F0;} TABLE.s TR.z TD {background:#FF9999;} TABLE.s TR.p TD {background:#FFFF88;} TABLE.s TR.c TD {background:#CCFFCC;} A:link {color:#0000EE;text-decoration:none;} A:visited {color:#0000EE;text-decoration:none;} A:hover {color:#0000EE;text-decoration:underline;} TABLE.cn {border-width:0 0 1px 0;} TABLE.s {border-width:1px 0 1px 1px;} TD.h {color:red;border-width:0 1px 0 0;} TD.f {border-width:0 1px 0 1px;} TD.hf {color:red;border-width:0 1px 0 1px;} TH.f {border-width:1px 1px 1px 1px;} TR.cis TD {background:#F0F0F0;} TR.cis TD {border-width:1px 1px 1px 0;} TR.cis TD.h {color:red;border-width:1px 1px 1px 0;} TR.cis TD.f {border-width:1px 1px 1px 1px;} TR.cis TD.hf {color:red;border-width:1px 1px 1px 1px;} TD.b {border-style:none;background:transparent;line-height:50%;}  TD.bt {border-width:1px 0 0 0;background:transparent;line-height:50%;} TR.o TD {background:#F0F0F0;}TABLE.it {border-style:none;}TABLE.it TD,TABLE.it TH {border-style:none;}</STYLE></HEAD><BODY><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="tl"><A HREF="http://emma.sourceforge.net/">EMMA</A> Coverage Report (generated Wed Dec 19 16:00:41 PST 2012)</TH></TR><TR><TD CLASS="nv">[<A HREF="../index.html">all classes</A>][<A HREF="7.html">org.h2.value</A>]</TD></TR></TABLE><H2>COVERAGE SUMMARY FOR SOURCE FILE [<SPAN CLASS="in">Value.java</SPAN>]</H2><TABLE CELLSPACING="0" WIDTH="100%"><TR><TH>name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD>Value.java</TD><TD>100% (1/1)</TD><TD CLASS="h">62%  (32/52)</TD><TD CLASS="h">78%  (1048/1345)</TD><TD>82%  (228.6/280)</TD></TR></TABLE><H3>COVERAGE BREAKDOWN BY CLASS AND METHOD</H3><TABLE CLASS="cn" CELLSPACING="0" WIDTH="100%"><TR><TH CLASS="f">name</TH><TH>class, %</TH><TH>method, %</TH><TH>block, %</TH><TH>line, %</TH></TR><TR><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD><TD CLASS="b"> </TD></TR><TR CLASS="cis"><TD CLASS="f">class <A HREF="#0">Value</A></TD><TD>100% (1/1)</TD><TD CLASS="h">62%  (32/52)</TD><TD CLASS="h">78%  (1048/1345)</TD><TD>82%  (228.6/280)</TD></TR><TR><TD CLASS="f"><A HREF="#1">add (Value): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2">clearCache (): void</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/3)</TD><TD CLASS="h">0%   (0/2)</TD></TR><TR><TD CLASS="f"><A HREF="#3">copyToTemp (): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#4">divide (Value): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#5">getBigDecimal (): BigDecimal</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#6">getBoolean (): Boolean</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#7">getByte (): byte</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#8">getBytes (): byte []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#9">getFloat (): float</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#a">getInputStream (): InputStream</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#b">getShort (): short</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#c">getSignum (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#d">getSmall (): byte []</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#e">getTableId (): int</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/2)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#f">getTime (): Time</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/6)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#10">modulus (Value): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#11">multiply (Value): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#12">negate (): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#13">subtract (Value): Value</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/4)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#14">throwUnsupportedExceptionForType (String): DbException</A></TD><TD> </TD><TD CLASS="h">0%   (0/1)</TD><TD CLASS="h">0%   (0/15)</TD><TD CLASS="h">0%   (0/1)</TD></TR><TR><TD CLASS="f"><A HREF="#15">convertToInt (long): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">69%  (11/16)</TD><TD CLASS="h">67%  (2/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#16">convertToLong (double): long</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">69%  (11/16)</TD><TD CLASS="h">67%  (2/3)</TD></TR><TR><TD CLASS="f"><A HREF="#17">convertToByte (long): byte</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">71%  (12/17)</TD><TD CLASS="h">67%  (2/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#18">convertToShort (long): short</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">71%  (12/17)</TD><TD CLASS="h">67%  (2/3)</TD></TR><TR><TD CLASS="f"><A HREF="#19">getHigherOrder (int, int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD CLASS="h">72%  (31/43)</TD><TD CLASS="h">75%  (9/12)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1a">convertTo (int): Value</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>82%  (679/826)</TD><TD>86%  (127/148)</TD></TR><TR><TD CLASS="f"><A HREF="#1b">getOrder (int): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>83%  (48/58)</TD><TD>96%  (24/25)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1c">checkPrecision (long): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>89%  (8/9)</TD><TD>88%  (0.9/1)</TD></TR><TR><TD CLASS="f"><A HREF="#1d">cache (Value): Value</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>91%  (50/55)</TD><TD>93%  (14/15)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#1e">compareTo (Value, CompareMode): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>96%  (43/45)</TD><TD>97%  (9.7/10)</TD></TR><TR><TD CLASS="f"><A HREF="#1f">&lt;static initializer&gt;</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (12/12)</TD><TD>100% (3/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#0">Value (): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (2/2)</TD></TR><TR><TD CLASS="f"><A HREF="#21">close (): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (1/1)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#22">compareTypeSave (Value, CompareMode): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (20/20)</TD><TD>100% (7/7)</TD></TR><TR><TD CLASS="f"><A HREF="#23">convertPrecision (long, boolean): Value</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#24">convertScale (boolean, int): Value</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#25">convertToLong (BigDecimal): long</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (19/19)</TD><TD>100% (3/3)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#26">getBytesNoCopy (): byte []</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#27">getDate (): Date</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#28">getDouble (): double</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#29">getInt (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2a">getLong (): long</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#2b">getMemory (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (5/5)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2c">getReader (): Reader</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (4/4)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#2d">getResultSet (): ResultSet</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (26/26)</TD><TD>100% (4/4)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#2e">getScale (): int</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#2f">getTimestamp (): Timestamp</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (6/6)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#30">getTraceSQL (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#31">isLinked (): boolean</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#32">link (DataHandler, int): Value</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (2/2)</TD><TD>100% (1/1)</TD></TR><TR><TD CLASS="f"><A HREF="#33">toString (): String</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (3/3)</TD><TD>100% (1/1)</TD></TR><TR CLASS="o"><TD CLASS="f"><A HREF="#34">unlink (): void</A></TD><TD> </TD><TD>100% (1/1)</TD><TD>100% (1/1)</TD><TD>100% (1/1)</TD></TR></TABLE><P></P><TABLE CLASS="s" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="l">1</TD><TD>/*</TD></TR><TR><TD CLASS="l">2</TD><TD> * Copyright 2004-2011 H2 Group. Multiple-Licensed under the H2 License,</TD></TR><TR><TD CLASS="l">3</TD><TD> * Version 1.0, and under the Eclipse Public License, Version 1.0</TD></TR><TR><TD CLASS="l">4</TD><TD> * (http://h2database.com/html/license.html).</TD></TR><TR><TD CLASS="l">5</TD><TD> * Initial Developer: H2 Group</TD></TR><TR><TD CLASS="l">6</TD><TD> */</TD></TR><TR><TD CLASS="l">7</TD><TD>package org.h2.value;</TD></TR><TR><TD CLASS="l">8</TD><TD> </TD></TR><TR><TD CLASS="l">9</TD><TD>import java.io.ByteArrayInputStream;</TD></TR><TR><TD CLASS="l">10</TD><TD>import java.io.InputStream;</TD></TR><TR><TD CLASS="l">11</TD><TD>import java.io.Reader;</TD></TR><TR><TD CLASS="l">12</TD><TD>import java.lang.ref.SoftReference;</TD></TR><TR><TD CLASS="l">13</TD><TD>import java.math.BigDecimal;</TD></TR><TR><TD CLASS="l">14</TD><TD>import java.sql.Date;</TD></TR><TR><TD CLASS="l">15</TD><TD>import java.sql.PreparedStatement;</TD></TR><TR><TD CLASS="l">16</TD><TD>import java.sql.ResultSet;</TD></TR><TR><TD CLASS="l">17</TD><TD>import java.sql.SQLException;</TD></TR><TR><TD CLASS="l">18</TD><TD>import java.sql.Time;</TD></TR><TR><TD CLASS="l">19</TD><TD>import java.sql.Timestamp;</TD></TR><TR><TD CLASS="l">20</TD><TD>import java.sql.Types;</TD></TR><TR><TD CLASS="l">21</TD><TD>import org.h2.constant.ErrorCode;</TD></TR><TR><TD CLASS="l">22</TD><TD>import org.h2.constant.SysProperties;</TD></TR><TR><TD CLASS="l">23</TD><TD>import org.h2.message.DbException;</TD></TR><TR><TD CLASS="l">24</TD><TD>import org.h2.store.DataHandler;</TD></TR><TR><TD CLASS="l">25</TD><TD>import org.h2.store.LobStorage;</TD></TR><TR><TD CLASS="l">26</TD><TD>import org.h2.tools.SimpleResultSet;</TD></TR><TR><TD CLASS="l">27</TD><TD>import org.h2.util.DateTimeUtils;</TD></TR><TR><TD CLASS="l">28</TD><TD>import org.h2.util.IOUtils;</TD></TR><TR><TD CLASS="l">29</TD><TD>import org.h2.util.MathUtils;</TD></TR><TR><TD CLASS="l">30</TD><TD>import org.h2.util.StringUtils;</TD></TR><TR><TD CLASS="l">31</TD><TD>import org.h2.util.Utils;</TD></TR><TR><TD CLASS="l">32</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="0">33</A></TD><TD>/**</TD></TR><TR><TD CLASS="l">34</TD><TD> * This is the base class for all value classes.</TD></TR><TR><TD CLASS="l">35</TD><TD> * It provides conversion and comparison methods.</TD></TR><TR><TD CLASS="l">36</TD><TD> */</TD></TR><TR CLASS="c"><TD CLASS="l">37</TD><TD>public abstract class Value {</TD></TR><TR><TD CLASS="l">38</TD><TD> </TD></TR><TR><TD CLASS="l">39</TD><TD>    /**</TD></TR><TR><TD CLASS="l">40</TD><TD>     * The data type is unknown at this time.</TD></TR><TR><TD CLASS="l">41</TD><TD>     */</TD></TR><TR><TD CLASS="l">42</TD><TD>    public static final int UNKNOWN = -1;</TD></TR><TR><TD CLASS="l">43</TD><TD> </TD></TR><TR><TD CLASS="l">44</TD><TD>    /**</TD></TR><TR><TD CLASS="l">45</TD><TD>     * The value type for NULL.</TD></TR><TR><TD CLASS="l">46</TD><TD>     */</TD></TR><TR><TD CLASS="l">47</TD><TD>    public static final int NULL = 0;</TD></TR><TR><TD CLASS="l">48</TD><TD> </TD></TR><TR><TD CLASS="l">49</TD><TD>    /**</TD></TR><TR><TD CLASS="l">50</TD><TD>     * The value type for BOOLEAN values.</TD></TR><TR><TD CLASS="l">51</TD><TD>     */</TD></TR><TR><TD CLASS="l">52</TD><TD>    public static final int BOOLEAN = 1;</TD></TR><TR><TD CLASS="l">53</TD><TD> </TD></TR><TR><TD CLASS="l">54</TD><TD>    /**</TD></TR><TR><TD CLASS="l">55</TD><TD>     * The value type for BYTE values.</TD></TR><TR><TD CLASS="l">56</TD><TD>     */</TD></TR><TR><TD CLASS="l">57</TD><TD>    public static final int BYTE = 2;</TD></TR><TR><TD CLASS="l">58</TD><TD> </TD></TR><TR><TD CLASS="l">59</TD><TD>    /**</TD></TR><TR><TD CLASS="l">60</TD><TD>     * The value type for SHORT values.</TD></TR><TR><TD CLASS="l">61</TD><TD>     */</TD></TR><TR><TD CLASS="l">62</TD><TD>    public static final int SHORT = 3;</TD></TR><TR><TD CLASS="l">63</TD><TD> </TD></TR><TR><TD CLASS="l">64</TD><TD>    /**</TD></TR><TR><TD CLASS="l">65</TD><TD>     * The value type for INT values.</TD></TR><TR><TD CLASS="l">66</TD><TD>     */</TD></TR><TR><TD CLASS="l">67</TD><TD>    public static final int INT = 4;</TD></TR><TR><TD CLASS="l">68</TD><TD> </TD></TR><TR><TD CLASS="l">69</TD><TD>    /**</TD></TR><TR><TD CLASS="l">70</TD><TD>     * The value type for LONG values.</TD></TR><TR><TD CLASS="l">71</TD><TD>     */</TD></TR><TR><TD CLASS="l">72</TD><TD>    public static final int LONG = 5;</TD></TR><TR><TD CLASS="l">73</TD><TD> </TD></TR><TR><TD CLASS="l">74</TD><TD>    /**</TD></TR><TR><TD CLASS="l">75</TD><TD>     * The value type for DECIMAL values.</TD></TR><TR><TD CLASS="l">76</TD><TD>     */</TD></TR><TR><TD CLASS="l">77</TD><TD>    public static final int DECIMAL = 6;</TD></TR><TR><TD CLASS="l">78</TD><TD> </TD></TR><TR><TD CLASS="l">79</TD><TD>    /**</TD></TR><TR><TD CLASS="l">80</TD><TD>     * The value type for DOUBLE values.</TD></TR><TR><TD CLASS="l">81</TD><TD>     */</TD></TR><TR><TD CLASS="l">82</TD><TD>    public static final int DOUBLE = 7;</TD></TR><TR><TD CLASS="l">83</TD><TD> </TD></TR><TR><TD CLASS="l">84</TD><TD>    /**</TD></TR><TR><TD CLASS="l">85</TD><TD>     * The value type for FLOAT values.</TD></TR><TR><TD CLASS="l">86</TD><TD>     */</TD></TR><TR><TD CLASS="l">87</TD><TD>    public static final int FLOAT = 8;</TD></TR><TR><TD CLASS="l">88</TD><TD> </TD></TR><TR><TD CLASS="l">89</TD><TD>    /**</TD></TR><TR><TD CLASS="l">90</TD><TD>     * The value type for INT values.</TD></TR><TR><TD CLASS="l">91</TD><TD>     */</TD></TR><TR><TD CLASS="l">92</TD><TD>    public static final int TIME = 9;</TD></TR><TR><TD CLASS="l">93</TD><TD> </TD></TR><TR><TD CLASS="l">94</TD><TD>    /**</TD></TR><TR><TD CLASS="l">95</TD><TD>     * The value type for DATE values.</TD></TR><TR><TD CLASS="l">96</TD><TD>     */</TD></TR><TR><TD CLASS="l">97</TD><TD>    public static final int DATE = 10;</TD></TR><TR><TD CLASS="l">98</TD><TD> </TD></TR><TR><TD CLASS="l">99</TD><TD>    /**</TD></TR><TR><TD CLASS="l">100</TD><TD>     * The value type for TIMESTAMP values.</TD></TR><TR><TD CLASS="l">101</TD><TD>     */</TD></TR><TR><TD CLASS="l">102</TD><TD>    public static final int TIMESTAMP = 11;</TD></TR><TR><TD CLASS="l">103</TD><TD> </TD></TR><TR><TD CLASS="l">104</TD><TD>    /**</TD></TR><TR><TD CLASS="l">105</TD><TD>     * The value type for BYTES values.</TD></TR><TR><TD CLASS="l">106</TD><TD>     */</TD></TR><TR><TD CLASS="l">107</TD><TD>    public static final int BYTES = 12;</TD></TR><TR><TD CLASS="l">108</TD><TD> </TD></TR><TR><TD CLASS="l">109</TD><TD>    /**</TD></TR><TR><TD CLASS="l">110</TD><TD>     * The value type for STRING values.</TD></TR><TR><TD CLASS="l">111</TD><TD>     */</TD></TR><TR><TD CLASS="l">112</TD><TD>    public static final int STRING = 13;</TD></TR><TR><TD CLASS="l">113</TD><TD> </TD></TR><TR><TD CLASS="l">114</TD><TD>    /**</TD></TR><TR><TD CLASS="l">115</TD><TD>     * The value type for case insensitive STRING values.</TD></TR><TR><TD CLASS="l">116</TD><TD>     */</TD></TR><TR><TD CLASS="l">117</TD><TD>    public static final int STRING_IGNORECASE = 14;</TD></TR><TR><TD CLASS="l">118</TD><TD> </TD></TR><TR><TD CLASS="l">119</TD><TD>    /**</TD></TR><TR><TD CLASS="l">120</TD><TD>     * The value type for BLOB values.</TD></TR><TR><TD CLASS="l">121</TD><TD>     */</TD></TR><TR><TD CLASS="l">122</TD><TD>    public static final int BLOB = 15;</TD></TR><TR><TD CLASS="l">123</TD><TD> </TD></TR><TR><TD CLASS="l">124</TD><TD>    /**</TD></TR><TR><TD CLASS="l">125</TD><TD>     * The value type for CLOB values.</TD></TR><TR><TD CLASS="l">126</TD><TD>     */</TD></TR><TR><TD CLASS="l">127</TD><TD>    public static final int CLOB = 16;</TD></TR><TR><TD CLASS="l">128</TD><TD> </TD></TR><TR><TD CLASS="l">129</TD><TD>    /**</TD></TR><TR><TD CLASS="l">130</TD><TD>     * The value type for ARRAY values.</TD></TR><TR><TD CLASS="l">131</TD><TD>     */</TD></TR><TR><TD CLASS="l">132</TD><TD>    public static final int ARRAY = 17;</TD></TR><TR><TD CLASS="l">133</TD><TD> </TD></TR><TR><TD CLASS="l">134</TD><TD>    /**</TD></TR><TR><TD CLASS="l">135</TD><TD>     * The value type for RESULT_SET values.</TD></TR><TR><TD CLASS="l">136</TD><TD>     */</TD></TR><TR><TD CLASS="l">137</TD><TD>    public static final int RESULT_SET = 18;</TD></TR><TR><TD CLASS="l">138</TD><TD>    /**</TD></TR><TR><TD CLASS="l">139</TD><TD>     * The value type for JAVA_OBJECT values.</TD></TR><TR><TD CLASS="l">140</TD><TD>     */</TD></TR><TR><TD CLASS="l">141</TD><TD>    public static final int JAVA_OBJECT = 19;</TD></TR><TR><TD CLASS="l">142</TD><TD> </TD></TR><TR><TD CLASS="l">143</TD><TD>    /**</TD></TR><TR><TD CLASS="l">144</TD><TD>     * The value type for UUID values.</TD></TR><TR><TD CLASS="l">145</TD><TD>     */</TD></TR><TR><TD CLASS="l">146</TD><TD>    public static final int UUID = 20;</TD></TR><TR><TD CLASS="l">147</TD><TD> </TD></TR><TR><TD CLASS="l">148</TD><TD>    /**</TD></TR><TR><TD CLASS="l">149</TD><TD>     * The value type for string values with a fixed size.</TD></TR><TR><TD CLASS="l">150</TD><TD>     */</TD></TR><TR><TD CLASS="l">151</TD><TD>    public static final int STRING_FIXED = 21;</TD></TR><TR><TD CLASS="l">152</TD><TD> </TD></TR><TR><TD CLASS="l">153</TD><TD>    /**</TD></TR><TR><TD CLASS="l"><A NAME="1f">154</A></TD><TD>     * The number of value types.</TD></TR><TR><TD CLASS="l">155</TD><TD>     */</TD></TR><TR><TD CLASS="l">156</TD><TD>    public static final int TYPE_COUNT = STRING_FIXED + 1;</TD></TR><TR><TD CLASS="l">157</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">158</TD><TD>    private static SoftReference&lt;Value[]&gt; softCache = new SoftReference&lt;Value[]&gt;(null);</TD></TR><TR CLASS="c"><TD CLASS="l">159</TD><TD>    private static final BigDecimal MAX_LONG_DECIMAL = BigDecimal.valueOf(Long.MAX_VALUE);</TD></TR><TR CLASS="c"><TD CLASS="l">160</TD><TD>    private static final BigDecimal MIN_LONG_DECIMAL = BigDecimal.valueOf(Long.MIN_VALUE);</TD></TR><TR><TD CLASS="l">161</TD><TD> </TD></TR><TR><TD CLASS="l">162</TD><TD>    /**</TD></TR><TR><TD CLASS="l">163</TD><TD>     * Get the SQL expression for this value.</TD></TR><TR><TD CLASS="l">164</TD><TD>     *</TD></TR><TR><TD CLASS="l">165</TD><TD>     * @return the SQL expression</TD></TR><TR><TD CLASS="l">166</TD><TD>     */</TD></TR><TR><TD CLASS="l">167</TD><TD>    public abstract String getSQL();</TD></TR><TR><TD CLASS="l">168</TD><TD> </TD></TR><TR><TD CLASS="l">169</TD><TD>    /**</TD></TR><TR><TD CLASS="l">170</TD><TD>     * Get the value type.</TD></TR><TR><TD CLASS="l">171</TD><TD>     *</TD></TR><TR><TD CLASS="l">172</TD><TD>     * @return the type</TD></TR><TR><TD CLASS="l">173</TD><TD>     */</TD></TR><TR><TD CLASS="l">174</TD><TD>    public abstract int getType();</TD></TR><TR><TD CLASS="l">175</TD><TD> </TD></TR><TR><TD CLASS="l">176</TD><TD>    /**</TD></TR><TR><TD CLASS="l">177</TD><TD>     * Get the precision.</TD></TR><TR><TD CLASS="l">178</TD><TD>     *</TD></TR><TR><TD CLASS="l">179</TD><TD>     * @return the precision</TD></TR><TR><TD CLASS="l">180</TD><TD>     */</TD></TR><TR><TD CLASS="l">181</TD><TD>    public abstract long getPrecision();</TD></TR><TR><TD CLASS="l">182</TD><TD> </TD></TR><TR><TD CLASS="l">183</TD><TD>    /**</TD></TR><TR><TD CLASS="l">184</TD><TD>     * Get the display size in characters.</TD></TR><TR><TD CLASS="l">185</TD><TD>     *</TD></TR><TR><TD CLASS="l">186</TD><TD>     * @return the display size</TD></TR><TR><TD CLASS="l">187</TD><TD>     */</TD></TR><TR><TD CLASS="l">188</TD><TD>    public abstract int getDisplaySize();</TD></TR><TR><TD CLASS="l">189</TD><TD> </TD></TR><TR><TD CLASS="l">190</TD><TD>    /**</TD></TR><TR><TD CLASS="l">191</TD><TD>     * Get the memory used by this object.</TD></TR><TR><TD CLASS="l"><A NAME="2b">192</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">193</TD><TD>     * @return the memory used in bytes</TD></TR><TR><TD CLASS="l">194</TD><TD>     */</TD></TR><TR><TD CLASS="l">195</TD><TD>    public int getMemory() {</TD></TR><TR CLASS="c"><TD CLASS="l">196</TD><TD>        return DataType.getDataType(getType()).memory;</TD></TR><TR><TD CLASS="l">197</TD><TD>    }</TD></TR><TR><TD CLASS="l">198</TD><TD> </TD></TR><TR><TD CLASS="l">199</TD><TD>    /**</TD></TR><TR><TD CLASS="l">200</TD><TD>     * Get the value as a string.</TD></TR><TR><TD CLASS="l">201</TD><TD>     *</TD></TR><TR><TD CLASS="l">202</TD><TD>     * @return the string</TD></TR><TR><TD CLASS="l">203</TD><TD>     */</TD></TR><TR><TD CLASS="l">204</TD><TD>    public abstract String getString();</TD></TR><TR><TD CLASS="l">205</TD><TD> </TD></TR><TR><TD CLASS="l">206</TD><TD>    /**</TD></TR><TR><TD CLASS="l">207</TD><TD>     * Get the value as an object.</TD></TR><TR><TD CLASS="l">208</TD><TD>     *</TD></TR><TR><TD CLASS="l">209</TD><TD>     * @return the object</TD></TR><TR><TD CLASS="l">210</TD><TD>     */</TD></TR><TR><TD CLASS="l">211</TD><TD>    public abstract Object getObject();</TD></TR><TR><TD CLASS="l">212</TD><TD> </TD></TR><TR><TD CLASS="l">213</TD><TD>    /**</TD></TR><TR><TD CLASS="l">214</TD><TD>     * Set the value as a parameter in a prepared statement.</TD></TR><TR><TD CLASS="l">215</TD><TD>     *</TD></TR><TR><TD CLASS="l">216</TD><TD>     * @param prep the prepared statement</TD></TR><TR><TD CLASS="l">217</TD><TD>     * @param parameterIndex the parameter index</TD></TR><TR><TD CLASS="l">218</TD><TD>     */</TD></TR><TR><TD CLASS="l">219</TD><TD>    public abstract void set(PreparedStatement prep, int parameterIndex) throws SQLException;</TD></TR><TR><TD CLASS="l">220</TD><TD> </TD></TR><TR><TD CLASS="l">221</TD><TD>    /**</TD></TR><TR><TD CLASS="l">222</TD><TD>     * Compare the value with another value of the same type.</TD></TR><TR><TD CLASS="l">223</TD><TD>     *</TD></TR><TR><TD CLASS="l">224</TD><TD>     * @param v the other value</TD></TR><TR><TD CLASS="l">225</TD><TD>     * @param mode the compare mode</TD></TR><TR><TD CLASS="l">226</TD><TD>     * @return 0 if both values are equal, -1 if the other value is smaller, and</TD></TR><TR><TD CLASS="l">227</TD><TD>     *         1 otherwise</TD></TR><TR><TD CLASS="l">228</TD><TD>     */</TD></TR><TR><TD CLASS="l">229</TD><TD>    protected abstract int compareSecure(Value v, CompareMode mode);</TD></TR><TR><TD CLASS="l">230</TD><TD> </TD></TR><TR><TD CLASS="l">231</TD><TD>    public abstract int hashCode();</TD></TR><TR><TD CLASS="l">232</TD><TD> </TD></TR><TR><TD CLASS="l">233</TD><TD>    /**</TD></TR><TR><TD CLASS="l">234</TD><TD>     * Check if the two values have the same hash code. No data conversion is</TD></TR><TR><TD CLASS="l">235</TD><TD>     * made; this method returns false if the other object is not of the same</TD></TR><TR><TD CLASS="l">236</TD><TD>     * class. For some values, compareTo may return 0 even if equals return</TD></TR><TR><TD CLASS="l">237</TD><TD>     * false. Example: ValueDecimal 0.0 and 0.00.</TD></TR><TR><TD CLASS="l">238</TD><TD>     *</TD></TR><TR><TD CLASS="l">239</TD><TD>     * @param other the other value</TD></TR><TR><TD CLASS="l">240</TD><TD>     * @return true if they are equal</TD></TR><TR><TD CLASS="l">241</TD><TD>     */</TD></TR><TR><TD CLASS="l">242</TD><TD>    public abstract boolean equals(Object other);</TD></TR><TR><TD CLASS="l">243</TD><TD> </TD></TR><TR><TD CLASS="l">244</TD><TD>    /**</TD></TR><TR><TD CLASS="l">245</TD><TD>     * Get the order of this value type.</TD></TR><TR><TD CLASS="l">246</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="1b">247</A></TD><TD>     * @param type the value type</TD></TR><TR><TD CLASS="l">248</TD><TD>     * @return the order number</TD></TR><TR><TD CLASS="l">249</TD><TD>     */</TD></TR><TR><TD CLASS="l">250</TD><TD>    static int getOrder(int type) {</TD></TR><TR CLASS="c"><TD CLASS="l">251</TD><TD>        switch(type) {</TD></TR><TR><TD CLASS="l">252</TD><TD>        case UNKNOWN:</TD></TR><TR CLASS="c"><TD CLASS="l">253</TD><TD>            return 1;</TD></TR><TR><TD CLASS="l">254</TD><TD>        case NULL:</TD></TR><TR CLASS="c"><TD CLASS="l">255</TD><TD>            return 2;</TD></TR><TR><TD CLASS="l">256</TD><TD>        case STRING:</TD></TR><TR CLASS="c"><TD CLASS="l">257</TD><TD>            return 10;</TD></TR><TR><TD CLASS="l">258</TD><TD>        case CLOB:</TD></TR><TR CLASS="c"><TD CLASS="l">259</TD><TD>            return 11;</TD></TR><TR><TD CLASS="l">260</TD><TD>        case STRING_FIXED:</TD></TR><TR CLASS="c"><TD CLASS="l">261</TD><TD>            return 12;</TD></TR><TR><TD CLASS="l">262</TD><TD>        case STRING_IGNORECASE:</TD></TR><TR CLASS="c"><TD CLASS="l">263</TD><TD>            return 13;</TD></TR><TR><TD CLASS="l">264</TD><TD>        case BOOLEAN:</TD></TR><TR CLASS="c"><TD CLASS="l">265</TD><TD>            return 20;</TD></TR><TR><TD CLASS="l">266</TD><TD>        case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">267</TD><TD>            return 21;</TD></TR><TR><TD CLASS="l">268</TD><TD>        case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">269</TD><TD>            return 22;</TD></TR><TR><TD CLASS="l">270</TD><TD>        case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">271</TD><TD>            return 23;</TD></TR><TR><TD CLASS="l">272</TD><TD>        case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">273</TD><TD>            return 24;</TD></TR><TR><TD CLASS="l">274</TD><TD>        case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">275</TD><TD>            return 25;</TD></TR><TR><TD CLASS="l">276</TD><TD>        case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">277</TD><TD>            return 26;</TD></TR><TR><TD CLASS="l">278</TD><TD>        case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">279</TD><TD>            return 27;</TD></TR><TR><TD CLASS="l">280</TD><TD>        case TIME:</TD></TR><TR CLASS="c"><TD CLASS="l">281</TD><TD>            return 30;</TD></TR><TR><TD CLASS="l">282</TD><TD>        case DATE:</TD></TR><TR CLASS="c"><TD CLASS="l">283</TD><TD>            return 31;</TD></TR><TR><TD CLASS="l">284</TD><TD>        case TIMESTAMP:</TD></TR><TR CLASS="c"><TD CLASS="l">285</TD><TD>            return 32;</TD></TR><TR><TD CLASS="l">286</TD><TD>        case BYTES:</TD></TR><TR CLASS="c"><TD CLASS="l">287</TD><TD>            return 40;</TD></TR><TR><TD CLASS="l">288</TD><TD>        case BLOB:</TD></TR><TR CLASS="c"><TD CLASS="l">289</TD><TD>            return 41;</TD></TR><TR><TD CLASS="l">290</TD><TD>        case UUID:</TD></TR><TR CLASS="c"><TD CLASS="l">291</TD><TD>            return 42;</TD></TR><TR><TD CLASS="l">292</TD><TD>        case JAVA_OBJECT:</TD></TR><TR CLASS="c"><TD CLASS="l">293</TD><TD>            return 43;</TD></TR><TR><TD CLASS="l">294</TD><TD>        case ARRAY:</TD></TR><TR CLASS="c"><TD CLASS="l">295</TD><TD>            return 50;</TD></TR><TR><TD CLASS="l">296</TD><TD>        case RESULT_SET:</TD></TR><TR CLASS="c"><TD CLASS="l">297</TD><TD>            return 51;</TD></TR><TR><TD CLASS="l">298</TD><TD>        default:</TD></TR><TR CLASS="z"><TD CLASS="l">299</TD><TD>            throw DbException.throwInternalError(&#34;type:&#34;+type);</TD></TR><TR><TD CLASS="l">300</TD><TD>        }</TD></TR><TR><TD CLASS="l">301</TD><TD>    }</TD></TR><TR><TD CLASS="l">302</TD><TD> </TD></TR><TR><TD CLASS="l">303</TD><TD>    /**</TD></TR><TR><TD CLASS="l">304</TD><TD>     * Get the higher value order type of two value types. If values need to be</TD></TR><TR><TD CLASS="l">305</TD><TD>     * converted to match the other operands value type, the value with the</TD></TR><TR><TD CLASS="l">306</TD><TD>     * lower order is converted to the value with the higher order.</TD></TR><TR><TD CLASS="l">307</TD><TD>     *</TD></TR><TR><TD CLASS="l">308</TD><TD>     * @param t1 the first value type</TD></TR><TR><TD CLASS="l"><A NAME="19">309</A></TD><TD>     * @param t2 the second value type</TD></TR><TR><TD CLASS="l">310</TD><TD>     * @return the higher value type of the two</TD></TR><TR><TD CLASS="l">311</TD><TD>     */</TD></TR><TR><TD CLASS="l">312</TD><TD>    public static int getHigherOrder(int t1, int t2) {</TD></TR><TR CLASS="c"><TD CLASS="l">313</TD><TD>        if (t1 == Value.UNKNOWN || t2 == Value.UNKNOWN) {</TD></TR><TR CLASS="c"><TD CLASS="l">314</TD><TD>            if (t1 == t2) {</TD></TR><TR CLASS="z"><TD CLASS="l">315</TD><TD>                throw DbException.get(ErrorCode.UNKNOWN_DATA_TYPE_1, &#34;?, ?&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">316</TD><TD>            } else if (t1 == Value.NULL) {</TD></TR><TR CLASS="z"><TD CLASS="l">317</TD><TD>                throw DbException.get(ErrorCode.UNKNOWN_DATA_TYPE_1, &#34;NULL, ?&#34;);</TD></TR><TR CLASS="c"><TD CLASS="l">318</TD><TD>            } else if (t2 == Value.NULL) {</TD></TR><TR CLASS="z"><TD CLASS="l">319</TD><TD>                throw DbException.get(ErrorCode.UNKNOWN_DATA_TYPE_1, &#34;?, NULL&#34;);</TD></TR><TR><TD CLASS="l">320</TD><TD>            }</TD></TR><TR><TD CLASS="l">321</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">322</TD><TD>        if (t1 == t2) {</TD></TR><TR CLASS="c"><TD CLASS="l">323</TD><TD>            return t1;</TD></TR><TR><TD CLASS="l">324</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">325</TD><TD>        int o1 = getOrder(t1);</TD></TR><TR CLASS="c"><TD CLASS="l">326</TD><TD>        int o2 = getOrder(t2);</TD></TR><TR CLASS="c"><TD CLASS="l">327</TD><TD>        return o1 &gt; o2 ? t1 : t2;</TD></TR><TR><TD CLASS="l">328</TD><TD>    }</TD></TR><TR><TD CLASS="l">329</TD><TD> </TD></TR><TR><TD CLASS="l">330</TD><TD>    /**</TD></TR><TR><TD CLASS="l">331</TD><TD>     * Check if a value is in the cache that is equal to this value. If yes,</TD></TR><TR><TD CLASS="l">332</TD><TD>     * this value should be used to save memory. If the value is not in the</TD></TR><TR><TD CLASS="l">333</TD><TD>     * cache yet, it is added.</TD></TR><TR><TD CLASS="l">334</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="1d">335</A></TD><TD>     * @param v the value to look for</TD></TR><TR><TD CLASS="l">336</TD><TD>     * @return the value in the cache or the value passed</TD></TR><TR><TD CLASS="l">337</TD><TD>     */</TD></TR><TR><TD CLASS="l">338</TD><TD>    static Value cache(Value v) {</TD></TR><TR CLASS="c"><TD CLASS="l">339</TD><TD>        if (SysProperties.OBJECT_CACHE) {</TD></TR><TR CLASS="c"><TD CLASS="l">340</TD><TD>            int hash = v.hashCode();</TD></TR><TR CLASS="c"><TD CLASS="l">341</TD><TD>            if (softCache == null) {</TD></TR><TR CLASS="z"><TD CLASS="l">342</TD><TD>                softCache = new SoftReference&lt;Value[]&gt;(null);</TD></TR><TR><TD CLASS="l">343</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">344</TD><TD>            Value[] cache = softCache.get();</TD></TR><TR CLASS="c"><TD CLASS="l">345</TD><TD>            if (cache == null) {</TD></TR><TR CLASS="c"><TD CLASS="l">346</TD><TD>                cache = new Value[SysProperties.OBJECT_CACHE_SIZE];</TD></TR><TR CLASS="c"><TD CLASS="l">347</TD><TD>                softCache = new SoftReference&lt;Value[]&gt;(cache);</TD></TR><TR><TD CLASS="l">348</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">349</TD><TD>            int index = hash &amp; (SysProperties.OBJECT_CACHE_SIZE - 1);</TD></TR><TR CLASS="c"><TD CLASS="l">350</TD><TD>            Value cached = cache[index];</TD></TR><TR CLASS="c"><TD CLASS="l">351</TD><TD>            if (cached != null) {</TD></TR><TR CLASS="c"><TD CLASS="l">352</TD><TD>                if (cached.getType() == v.getType() &amp;&amp; v.equals(cached)) {</TD></TR><TR><TD CLASS="l">353</TD><TD>                    // cacheHit++;</TD></TR><TR CLASS="c"><TD CLASS="l">354</TD><TD>                    return cached;</TD></TR><TR><TD CLASS="l">355</TD><TD>                }</TD></TR><TR><TD CLASS="l">356</TD><TD>            }</TD></TR><TR><TD CLASS="l">357</TD><TD>            // cacheMiss++;</TD></TR><TR><TD CLASS="l">358</TD><TD>            // cache[cacheCleaner] = null;</TD></TR><TR><TD CLASS="l">359</TD><TD>            // cacheCleaner = (cacheCleaner + 1) &amp; (Constants.OBJECT_CACHE_SIZE - 1);</TD></TR><TR CLASS="c"><TD CLASS="l">360</TD><TD>            cache[index] = v;</TD></TR><TR><TD CLASS="l">361</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">362</TD><TD>        return v;</TD></TR><TR><TD CLASS="l">363</TD><TD>    }</TD></TR><TR><TD CLASS="l">364</TD><TD> </TD></TR><TR><TD CLASS="l"><A NAME="2">365</A></TD><TD>    /**</TD></TR><TR><TD CLASS="l">366</TD><TD>     * Clear the value cache. Used for testing.</TD></TR><TR><TD CLASS="l">367</TD><TD>     */</TD></TR><TR><TD CLASS="l">368</TD><TD>    public static void clearCache() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="6">369</A></TD><TD>        softCache = null;</TD></TR><TR CLASS="z"><TD CLASS="l">370</TD><TD>    }</TD></TR><TR><TD CLASS="l">371</TD><TD> </TD></TR><TR><TD CLASS="l">372</TD><TD>    public Boolean getBoolean() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="27">373</A></TD><TD>        return ((ValueBoolean) convertTo(Value.BOOLEAN)).getBoolean();</TD></TR><TR><TD CLASS="l">374</TD><TD>    }</TD></TR><TR><TD CLASS="l">375</TD><TD> </TD></TR><TR><TD CLASS="l">376</TD><TD>    public Date getDate() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="f">377</A></TD><TD>        return ((ValueDate) convertTo(Value.DATE)).getDate();</TD></TR><TR><TD CLASS="l">378</TD><TD>    }</TD></TR><TR><TD CLASS="l">379</TD><TD> </TD></TR><TR><TD CLASS="l">380</TD><TD>    public Time getTime() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="2f">381</A></TD><TD>        return ((ValueTime) convertTo(Value.TIME)).getTime();</TD></TR><TR><TD CLASS="l">382</TD><TD>    }</TD></TR><TR><TD CLASS="l">383</TD><TD> </TD></TR><TR><TD CLASS="l">384</TD><TD>    public Timestamp getTimestamp() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="8">385</A></TD><TD>        return ((ValueTimestamp) convertTo(Value.TIMESTAMP)).getTimestamp();</TD></TR><TR><TD CLASS="l">386</TD><TD>    }</TD></TR><TR><TD CLASS="l">387</TD><TD> </TD></TR><TR><TD CLASS="l">388</TD><TD>    public byte[] getBytes() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="26">389</A></TD><TD>        return ((ValueBytes) convertTo(Value.BYTES)).getBytes();</TD></TR><TR><TD CLASS="l">390</TD><TD>    }</TD></TR><TR><TD CLASS="l">391</TD><TD> </TD></TR><TR><TD CLASS="l">392</TD><TD>    public byte[] getBytesNoCopy() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="7">393</A></TD><TD>        return ((ValueBytes) convertTo(Value.BYTES)).getBytesNoCopy();</TD></TR><TR><TD CLASS="l">394</TD><TD>    }</TD></TR><TR><TD CLASS="l">395</TD><TD> </TD></TR><TR><TD CLASS="l">396</TD><TD>    public byte getByte() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="b">397</A></TD><TD>        return ((ValueByte) convertTo(Value.BYTE)).getByte();</TD></TR><TR><TD CLASS="l">398</TD><TD>    }</TD></TR><TR><TD CLASS="l">399</TD><TD> </TD></TR><TR><TD CLASS="l">400</TD><TD>    public short getShort() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="5">401</A></TD><TD>        return ((ValueShort) convertTo(Value.SHORT)).getShort();</TD></TR><TR><TD CLASS="l">402</TD><TD>    }</TD></TR><TR><TD CLASS="l">403</TD><TD> </TD></TR><TR><TD CLASS="l">404</TD><TD>    public BigDecimal getBigDecimal() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="28">405</A></TD><TD>        return ((ValueDecimal) convertTo(Value.DECIMAL)).getBigDecimal();</TD></TR><TR><TD CLASS="l">406</TD><TD>    }</TD></TR><TR><TD CLASS="l">407</TD><TD> </TD></TR><TR><TD CLASS="l">408</TD><TD>    public double getDouble() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="9">409</A></TD><TD>        return ((ValueDouble) convertTo(Value.DOUBLE)).getDouble();</TD></TR><TR><TD CLASS="l">410</TD><TD>    }</TD></TR><TR><TD CLASS="l">411</TD><TD> </TD></TR><TR><TD CLASS="l">412</TD><TD>    public float getFloat() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="29">413</A></TD><TD>        return ((ValueFloat) convertTo(Value.FLOAT)).getFloat();</TD></TR><TR><TD CLASS="l">414</TD><TD>    }</TD></TR><TR><TD CLASS="l">415</TD><TD> </TD></TR><TR><TD CLASS="l">416</TD><TD>    public int getInt() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="2a">417</A></TD><TD>        return ((ValueInt) convertTo(Value.INT)).getInt();</TD></TR><TR><TD CLASS="l">418</TD><TD>    }</TD></TR><TR><TD CLASS="l">419</TD><TD> </TD></TR><TR><TD CLASS="l">420</TD><TD>    public long getLong() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="a">421</A></TD><TD>        return ((ValueLong) convertTo(Value.LONG)).getLong();</TD></TR><TR><TD CLASS="l">422</TD><TD>    }</TD></TR><TR><TD CLASS="l">423</TD><TD> </TD></TR><TR><TD CLASS="l">424</TD><TD>    public InputStream getInputStream() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="2c">425</A></TD><TD>        return new ByteArrayInputStream(getBytesNoCopy());</TD></TR><TR><TD CLASS="l">426</TD><TD>    }</TD></TR><TR><TD CLASS="l">427</TD><TD> </TD></TR><TR><TD CLASS="l">428</TD><TD>    public Reader getReader() {</TD></TR><TR CLASS="c"><TD CLASS="l">429</TD><TD>        return IOUtils.getReaderFromString(getString());</TD></TR><TR><TD CLASS="l">430</TD><TD>    }</TD></TR><TR><TD CLASS="l">431</TD><TD> </TD></TR><TR><TD CLASS="l">432</TD><TD>    /**</TD></TR><TR><TD CLASS="l">433</TD><TD>     * Add a value and return the result.</TD></TR><TR><TD CLASS="l">434</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="1">435</A></TD><TD>     * @param v the value to add</TD></TR><TR><TD CLASS="l">436</TD><TD>     * @return the result</TD></TR><TR><TD CLASS="l">437</TD><TD>     */</TD></TR><TR><TD CLASS="l">438</TD><TD>    public Value add(Value v) {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="c">439</A></TD><TD>        throw throwUnsupportedExceptionForType(&#34;+&#34;);</TD></TR><TR><TD CLASS="l">440</TD><TD>    }</TD></TR><TR><TD CLASS="l">441</TD><TD> </TD></TR><TR><TD CLASS="l">442</TD><TD>    public int getSignum() {</TD></TR><TR CLASS="z"><TD CLASS="l">443</TD><TD>        throw throwUnsupportedExceptionForType(&#34;SIGNUM&#34;);</TD></TR><TR><TD CLASS="l">444</TD><TD>    }</TD></TR><TR><TD CLASS="l">445</TD><TD> </TD></TR><TR><TD CLASS="l">446</TD><TD>    /**</TD></TR><TR><TD CLASS="l">447</TD><TD>     * Return -value if this value support arithmetic operations.</TD></TR><TR><TD CLASS="l"><A NAME="12">448</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">449</TD><TD>     * @return the negative</TD></TR><TR><TD CLASS="l">450</TD><TD>     */</TD></TR><TR><TD CLASS="l">451</TD><TD>    public Value negate() {</TD></TR><TR CLASS="z"><TD CLASS="l">452</TD><TD>        throw throwUnsupportedExceptionForType(&#34;NEG&#34;);</TD></TR><TR><TD CLASS="l">453</TD><TD>    }</TD></TR><TR><TD CLASS="l">454</TD><TD> </TD></TR><TR><TD CLASS="l">455</TD><TD>    /**</TD></TR><TR><TD CLASS="l">456</TD><TD>     * Subtract a value and return the result.</TD></TR><TR><TD CLASS="l">457</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="13">458</A></TD><TD>     * @param v the value to subtract</TD></TR><TR><TD CLASS="l">459</TD><TD>     * @return the result</TD></TR><TR><TD CLASS="l">460</TD><TD>     */</TD></TR><TR><TD CLASS="l">461</TD><TD>    public Value subtract(Value v) {</TD></TR><TR CLASS="z"><TD CLASS="l">462</TD><TD>        throw throwUnsupportedExceptionForType(&#34;-&#34;);</TD></TR><TR><TD CLASS="l">463</TD><TD>    }</TD></TR><TR><TD CLASS="l">464</TD><TD> </TD></TR><TR><TD CLASS="l">465</TD><TD>    /**</TD></TR><TR><TD CLASS="l">466</TD><TD>     * Divide by a value and return the result.</TD></TR><TR><TD CLASS="l">467</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="4">468</A></TD><TD>     * @param v the value to divide by</TD></TR><TR><TD CLASS="l">469</TD><TD>     * @return the result</TD></TR><TR><TD CLASS="l">470</TD><TD>     */</TD></TR><TR><TD CLASS="l">471</TD><TD>    public Value divide(Value v) {</TD></TR><TR CLASS="z"><TD CLASS="l">472</TD><TD>        throw throwUnsupportedExceptionForType(&#34;/&#34;);</TD></TR><TR><TD CLASS="l">473</TD><TD>    }</TD></TR><TR><TD CLASS="l">474</TD><TD> </TD></TR><TR><TD CLASS="l">475</TD><TD>    /**</TD></TR><TR><TD CLASS="l">476</TD><TD>     * Multiply with a value and return the result.</TD></TR><TR><TD CLASS="l">477</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="11">478</A></TD><TD>     * @param v the value to multiply with</TD></TR><TR><TD CLASS="l">479</TD><TD>     * @return the result</TD></TR><TR><TD CLASS="l">480</TD><TD>     */</TD></TR><TR><TD CLASS="l">481</TD><TD>    public Value multiply(Value v) {</TD></TR><TR CLASS="z"><TD CLASS="l">482</TD><TD>        throw throwUnsupportedExceptionForType(&#34;*&#34;);</TD></TR><TR><TD CLASS="l">483</TD><TD>    }</TD></TR><TR><TD CLASS="l">484</TD><TD> </TD></TR><TR><TD CLASS="l">485</TD><TD>    /**</TD></TR><TR><TD CLASS="l">486</TD><TD>     * Take the modulus with a value and return the result.</TD></TR><TR><TD CLASS="l">487</TD><TD>     *</TD></TR><TR><TD CLASS="l"><A NAME="10">488</A></TD><TD>     * @param v the value to take the modulus with</TD></TR><TR><TD CLASS="l">489</TD><TD>     * @return the result</TD></TR><TR><TD CLASS="l">490</TD><TD>     */</TD></TR><TR><TD CLASS="l">491</TD><TD>    public Value modulus(Value v) {</TD></TR><TR CLASS="z"><TD CLASS="l">492</TD><TD>        throw throwUnsupportedExceptionForType(&#34;%&#34;);</TD></TR><TR><TD CLASS="l">493</TD><TD>    }</TD></TR><TR><TD CLASS="l">494</TD><TD> </TD></TR><TR><TD CLASS="l">495</TD><TD>    /**</TD></TR><TR><TD CLASS="l">496</TD><TD>     * Compare a value to the specified type.</TD></TR><TR><TD CLASS="l">497</TD><TD>     *</TD></TR><TR><TD CLASS="l">498</TD><TD>     * @param targetType the type of the returned value</TD></TR><TR><TD CLASS="l">499</TD><TD>     * @return the converted value</TD></TR><TR><TD CLASS="l"><A NAME="1a">500</A></TD><TD>     */</TD></TR><TR><TD CLASS="l">501</TD><TD>    public Value convertTo(int targetType) {</TD></TR><TR><TD CLASS="l">502</TD><TD>        // converting NULL is done in ValueNull</TD></TR><TR><TD CLASS="l">503</TD><TD>        // converting BLOB to CLOB and vice versa is done in ValueLob</TD></TR><TR CLASS="c"><TD CLASS="l">504</TD><TD>        if (getType() == targetType) {</TD></TR><TR CLASS="c"><TD CLASS="l">505</TD><TD>            return this;</TD></TR><TR><TD CLASS="l">506</TD><TD>        }</TD></TR><TR><TD CLASS="l">507</TD><TD>        try {</TD></TR><TR><TD CLASS="l">508</TD><TD>            // decimal conversion</TD></TR><TR CLASS="c"><TD CLASS="l">509</TD><TD>            switch (targetType) {</TD></TR><TR><TD CLASS="l">510</TD><TD>            case BOOLEAN: {</TD></TR><TR CLASS="c"><TD CLASS="l">511</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">512</TD><TD>                case BYTE:</TD></TR><TR><TD CLASS="l">513</TD><TD>                case SHORT:</TD></TR><TR><TD CLASS="l">514</TD><TD>                case INT:</TD></TR><TR><TD CLASS="l">515</TD><TD>                case LONG:</TD></TR><TR><TD CLASS="l">516</TD><TD>                case DECIMAL:</TD></TR><TR><TD CLASS="l">517</TD><TD>                case DOUBLE:</TD></TR><TR><TD CLASS="l">518</TD><TD>                case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">519</TD><TD>                    return ValueBoolean.get(getSignum() != 0);</TD></TR><TR><TD CLASS="l">520</TD><TD>                case TIME:</TD></TR><TR><TD CLASS="l">521</TD><TD>                case DATE:</TD></TR><TR><TD CLASS="l">522</TD><TD>                case TIMESTAMP:</TD></TR><TR><TD CLASS="l">523</TD><TD>                case BYTES:</TD></TR><TR><TD CLASS="l">524</TD><TD>                case JAVA_OBJECT:</TD></TR><TR><TD CLASS="l">525</TD><TD>                case UUID:</TD></TR><TR CLASS="z"><TD CLASS="l">526</TD><TD>                    throw DbException.get(ErrorCode.DATA_CONVERSION_ERROR_1, getString());</TD></TR><TR><TD CLASS="l">527</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">528</TD><TD>                break;</TD></TR><TR><TD CLASS="l">529</TD><TD>            }</TD></TR><TR><TD CLASS="l">530</TD><TD>            case BYTE: {</TD></TR><TR CLASS="c"><TD CLASS="l">531</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">532</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="z"><TD CLASS="l">533</TD><TD>                    return ValueByte.get(getBoolean().booleanValue() ? (byte) 1 : (byte) 0);</TD></TR><TR><TD CLASS="l">534</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">535</TD><TD>                    return ValueByte.get(convertToByte(getShort()));</TD></TR><TR><TD CLASS="l">536</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">537</TD><TD>                    return ValueByte.get(convertToByte(getInt()));</TD></TR><TR><TD CLASS="l">538</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">539</TD><TD>                    return ValueByte.get(convertToByte(getLong()));</TD></TR><TR><TD CLASS="l">540</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">541</TD><TD>                    return ValueByte.get(convertToByte(convertToLong(getBigDecimal())));</TD></TR><TR><TD CLASS="l">542</TD><TD>                case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">543</TD><TD>                    return ValueByte.get(convertToByte(convertToLong(getDouble())));</TD></TR><TR><TD CLASS="l">544</TD><TD>                case FLOAT:</TD></TR><TR CLASS="z"><TD CLASS="l">545</TD><TD>                    return ValueByte.get(convertToByte(convertToLong(getFloat())));</TD></TR><TR><TD CLASS="l">546</TD><TD>                case BYTES:</TD></TR><TR CLASS="c"><TD CLASS="l">547</TD><TD>                    return ValueByte.get((byte) Integer.parseInt(getString(), 16));</TD></TR><TR><TD CLASS="l">548</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">549</TD><TD>                break;</TD></TR><TR><TD CLASS="l">550</TD><TD>            }</TD></TR><TR><TD CLASS="l">551</TD><TD>            case SHORT: {</TD></TR><TR CLASS="c"><TD CLASS="l">552</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">553</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="z"><TD CLASS="l">554</TD><TD>                    return ValueShort.get(getBoolean().booleanValue() ? (short) 1 : (short) 0);</TD></TR><TR><TD CLASS="l">555</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">556</TD><TD>                    return ValueShort.get(getByte());</TD></TR><TR><TD CLASS="l">557</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">558</TD><TD>                    return ValueShort.get(convertToShort(getInt()));</TD></TR><TR><TD CLASS="l">559</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">560</TD><TD>                    return ValueShort.get(convertToShort(getLong()));</TD></TR><TR><TD CLASS="l">561</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">562</TD><TD>                    return ValueShort.get(convertToShort(convertToLong(getBigDecimal())));</TD></TR><TR><TD CLASS="l">563</TD><TD>                case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">564</TD><TD>                    return ValueShort.get(convertToShort(convertToLong(getDouble())));</TD></TR><TR><TD CLASS="l">565</TD><TD>                case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">566</TD><TD>                    return ValueShort.get(convertToShort(convertToLong(getFloat())));</TD></TR><TR><TD CLASS="l">567</TD><TD>                case BYTES:</TD></TR><TR CLASS="c"><TD CLASS="l">568</TD><TD>                    return ValueShort.get((short) Integer.parseInt(getString(), 16));</TD></TR><TR><TD CLASS="l">569</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">570</TD><TD>                break;</TD></TR><TR><TD CLASS="l">571</TD><TD>            }</TD></TR><TR><TD CLASS="l">572</TD><TD>            case INT: {</TD></TR><TR CLASS="c"><TD CLASS="l">573</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">574</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="c"><TD CLASS="l">575</TD><TD>                    return ValueInt.get(getBoolean().booleanValue() ? 1 : 0);</TD></TR><TR><TD CLASS="l">576</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">577</TD><TD>                    return ValueInt.get(getByte());</TD></TR><TR><TD CLASS="l">578</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">579</TD><TD>                    return ValueInt.get(getShort());</TD></TR><TR><TD CLASS="l">580</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">581</TD><TD>                    return ValueInt.get(convertToInt(getLong()));</TD></TR><TR><TD CLASS="l">582</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">583</TD><TD>                    return ValueInt.get(convertToInt(convertToLong(getBigDecimal())));</TD></TR><TR><TD CLASS="l">584</TD><TD>                case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">585</TD><TD>                    return ValueInt.get(convertToInt(convertToLong(getDouble())));</TD></TR><TR><TD CLASS="l">586</TD><TD>                case FLOAT:</TD></TR><TR CLASS="z"><TD CLASS="l">587</TD><TD>                    return ValueInt.get(convertToInt(convertToLong(getFloat())));</TD></TR><TR><TD CLASS="l">588</TD><TD>                case BYTES:</TD></TR><TR CLASS="c"><TD CLASS="l">589</TD><TD>                    return ValueInt.get((int) Long.parseLong(getString(), 16));</TD></TR><TR><TD CLASS="l">590</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">591</TD><TD>                break;</TD></TR><TR><TD CLASS="l">592</TD><TD>            }</TD></TR><TR><TD CLASS="l">593</TD><TD>            case LONG: {</TD></TR><TR CLASS="c"><TD CLASS="l">594</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">595</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="c"><TD CLASS="l">596</TD><TD>                    return ValueLong.get(getBoolean().booleanValue() ? 1 : 0);</TD></TR><TR><TD CLASS="l">597</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">598</TD><TD>                    return ValueLong.get(getByte());</TD></TR><TR><TD CLASS="l">599</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">600</TD><TD>                    return ValueLong.get(getShort());</TD></TR><TR><TD CLASS="l">601</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">602</TD><TD>                    return ValueLong.get(getInt());</TD></TR><TR><TD CLASS="l">603</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">604</TD><TD>                    return ValueLong.get(convertToLong(getBigDecimal()));</TD></TR><TR><TD CLASS="l">605</TD><TD>                case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">606</TD><TD>                    return ValueLong.get(convertToLong(getDouble()));</TD></TR><TR><TD CLASS="l">607</TD><TD>                case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">608</TD><TD>                    return ValueLong.get(convertToLong(getFloat()));</TD></TR><TR><TD CLASS="l">609</TD><TD>                case BYTES: {</TD></TR><TR><TD CLASS="l">610</TD><TD>                    // parseLong doesn't work for ffffffffffffffff</TD></TR><TR CLASS="c"><TD CLASS="l">611</TD><TD>                    byte[] d = getBytes();</TD></TR><TR CLASS="c"><TD CLASS="l">612</TD><TD>                    if (d.length == 8) {</TD></TR><TR CLASS="c"><TD CLASS="l">613</TD><TD>                        return ValueLong.get(Utils.readLong(d, 0));</TD></TR><TR><TD CLASS="l">614</TD><TD>                    }</TD></TR><TR CLASS="c"><TD CLASS="l">615</TD><TD>                    return ValueLong.get(Long.parseLong(getString(), 16));</TD></TR><TR><TD CLASS="l">616</TD><TD>                }</TD></TR><TR><TD CLASS="l">617</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">618</TD><TD>                break;</TD></TR><TR><TD CLASS="l">619</TD><TD>            }</TD></TR><TR><TD CLASS="l">620</TD><TD>            case DECIMAL: {</TD></TR><TR><TD CLASS="l">621</TD><TD>                // convert to string is required for JDK 1.4</TD></TR><TR CLASS="c"><TD CLASS="l">622</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">623</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="z"><TD CLASS="l">624</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(getBoolean().booleanValue() ? 1 : 0));</TD></TR><TR><TD CLASS="l">625</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">626</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(getByte()));</TD></TR><TR><TD CLASS="l">627</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">628</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(getShort()));</TD></TR><TR><TD CLASS="l">629</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">630</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(getInt()));</TD></TR><TR><TD CLASS="l">631</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">632</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(getLong()));</TD></TR><TR><TD CLASS="l">633</TD><TD>                case DOUBLE: {</TD></TR><TR CLASS="c"><TD CLASS="l">634</TD><TD>                    double d = getDouble();</TD></TR><TR CLASS="c"><TD CLASS="l">635</TD><TD>                    if (Double.isInfinite(d) || Double.isNaN(d)) {</TD></TR><TR CLASS="z"><TD CLASS="l">636</TD><TD>                        throw DbException.get(ErrorCode.DATA_CONVERSION_ERROR_1, &#34;&#34; + d);</TD></TR><TR><TD CLASS="l">637</TD><TD>                    }</TD></TR><TR CLASS="c"><TD CLASS="l">638</TD><TD>                    return ValueDecimal.get(BigDecimal.valueOf(d));</TD></TR><TR><TD CLASS="l">639</TD><TD>                }</TD></TR><TR><TD CLASS="l">640</TD><TD>                case FLOAT: {</TD></TR><TR CLASS="c"><TD CLASS="l">641</TD><TD>                    float f = getFloat();</TD></TR><TR CLASS="c"><TD CLASS="l">642</TD><TD>                    if (Float.isInfinite(f) || Float.isNaN(f)) {</TD></TR><TR CLASS="z"><TD CLASS="l">643</TD><TD>                        throw DbException.get(ErrorCode.DATA_CONVERSION_ERROR_1, &#34;&#34; + f);</TD></TR><TR><TD CLASS="l">644</TD><TD>                    }</TD></TR><TR CLASS="c"><TD CLASS="l">645</TD><TD>                    return ValueDecimal.get(new BigDecimal(Float.toString(f)));</TD></TR><TR><TD CLASS="l">646</TD><TD>                }</TD></TR><TR><TD CLASS="l">647</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">648</TD><TD>                break;</TD></TR><TR><TD CLASS="l">649</TD><TD>            }</TD></TR><TR><TD CLASS="l">650</TD><TD>            case DOUBLE: {</TD></TR><TR CLASS="c"><TD CLASS="l">651</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">652</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="z"><TD CLASS="l">653</TD><TD>                    return ValueDouble.get(getBoolean().booleanValue() ? 1 : 0);</TD></TR><TR><TD CLASS="l">654</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">655</TD><TD>                    return ValueDouble.get(getByte());</TD></TR><TR><TD CLASS="l">656</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">657</TD><TD>                    return ValueDouble.get(getShort());</TD></TR><TR><TD CLASS="l">658</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">659</TD><TD>                    return ValueDouble.get(getInt());</TD></TR><TR><TD CLASS="l">660</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">661</TD><TD>                    return ValueDouble.get(getLong());</TD></TR><TR><TD CLASS="l">662</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">663</TD><TD>                    return ValueDouble.get(getBigDecimal().doubleValue());</TD></TR><TR><TD CLASS="l">664</TD><TD>                case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">665</TD><TD>                    return ValueDouble.get(getFloat());</TD></TR><TR><TD CLASS="l">666</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">667</TD><TD>                break;</TD></TR><TR><TD CLASS="l">668</TD><TD>            }</TD></TR><TR><TD CLASS="l">669</TD><TD>            case FLOAT: {</TD></TR><TR CLASS="c"><TD CLASS="l">670</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">671</TD><TD>                case BOOLEAN:</TD></TR><TR CLASS="z"><TD CLASS="l">672</TD><TD>                    return ValueFloat.get(getBoolean().booleanValue() ? 1 : 0);</TD></TR><TR><TD CLASS="l">673</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">674</TD><TD>                    return ValueFloat.get(getByte());</TD></TR><TR><TD CLASS="l">675</TD><TD>                case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">676</TD><TD>                    return ValueFloat.get(getShort());</TD></TR><TR><TD CLASS="l">677</TD><TD>                case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">678</TD><TD>                    return ValueFloat.get(getInt());</TD></TR><TR><TD CLASS="l">679</TD><TD>                case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">680</TD><TD>                    return ValueFloat.get(getLong());</TD></TR><TR><TD CLASS="l">681</TD><TD>                case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">682</TD><TD>                    return ValueFloat.get(getBigDecimal().floatValue());</TD></TR><TR><TD CLASS="l">683</TD><TD>                case DOUBLE:</TD></TR><TR CLASS="z"><TD CLASS="l">684</TD><TD>                    return ValueFloat.get((float) getDouble());</TD></TR><TR><TD CLASS="l">685</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">686</TD><TD>                break;</TD></TR><TR><TD CLASS="l">687</TD><TD>            }</TD></TR><TR><TD CLASS="l">688</TD><TD>            case DATE: {</TD></TR><TR CLASS="c"><TD CLASS="l">689</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">690</TD><TD>                case TIME:</TD></TR><TR><TD CLASS="l">691</TD><TD>                    // because the time has set the date to 1970-01-01,</TD></TR><TR><TD CLASS="l">692</TD><TD>                    // this will be the result</TD></TR><TR CLASS="c"><TD CLASS="l">693</TD><TD>                    return ValueDate.fromDateValue(DateTimeUtils.dateValue(1970, 1, 1));</TD></TR><TR><TD CLASS="l">694</TD><TD>                case TIMESTAMP:</TD></TR><TR CLASS="c"><TD CLASS="l">695</TD><TD>                    return ValueDate.fromDateValue(((ValueTimestamp) this).getDateValue());</TD></TR><TR><TD CLASS="l">696</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">697</TD><TD>                break;</TD></TR><TR><TD CLASS="l">698</TD><TD>            }</TD></TR><TR><TD CLASS="l">699</TD><TD>            case TIME: {</TD></TR><TR CLASS="c"><TD CLASS="l">700</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">701</TD><TD>                case DATE:</TD></TR><TR><TD CLASS="l">702</TD><TD>                    // need to normalize the year, month and day</TD></TR><TR><TD CLASS="l">703</TD><TD>                    // because a date has the time set to 0, the result will be 0</TD></TR><TR CLASS="c"><TD CLASS="l">704</TD><TD>                    return ValueTime.fromNanos(0);</TD></TR><TR><TD CLASS="l">705</TD><TD>                case TIMESTAMP:</TD></TR><TR CLASS="c"><TD CLASS="l">706</TD><TD>                    return ValueTime.fromNanos(((ValueTimestamp) this).getNanos());</TD></TR><TR><TD CLASS="l">707</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">708</TD><TD>                break;</TD></TR><TR><TD CLASS="l">709</TD><TD>            }</TD></TR><TR><TD CLASS="l">710</TD><TD>            case TIMESTAMP: {</TD></TR><TR CLASS="c"><TD CLASS="l">711</TD><TD>                switch (getType()) {</TD></TR><TR><TD CLASS="l">712</TD><TD>                case TIME:</TD></TR><TR CLASS="c"><TD CLASS="l">713</TD><TD>                    return DateTimeUtils.normalizeTimestamp(0, ((ValueTime) this).getNanos());</TD></TR><TR><TD CLASS="l">714</TD><TD>                case DATE:</TD></TR><TR CLASS="c"><TD CLASS="l">715</TD><TD>                    return ValueTimestamp.fromDateValueAndNanos(((ValueDate) this).getDateValue(), 0);</TD></TR><TR><TD CLASS="l">716</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">717</TD><TD>                break;</TD></TR><TR><TD CLASS="l">718</TD><TD>            }</TD></TR><TR><TD CLASS="l">719</TD><TD>            case BYTES: {</TD></TR><TR CLASS="c"><TD CLASS="l">720</TD><TD>                switch(getType()) {</TD></TR><TR><TD CLASS="l">721</TD><TD>                case JAVA_OBJECT:</TD></TR><TR><TD CLASS="l">722</TD><TD>                case BLOB:</TD></TR><TR CLASS="z"><TD CLASS="l">723</TD><TD>                    return ValueBytes.getNoCopy(getBytesNoCopy());</TD></TR><TR><TD CLASS="l">724</TD><TD>                case UUID:</TD></TR><TR CLASS="z"><TD CLASS="l">725</TD><TD>                    return ValueBytes.getNoCopy(getBytes());</TD></TR><TR><TD CLASS="l">726</TD><TD>                case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">727</TD><TD>                    return ValueBytes.getNoCopy(new byte[]{getByte()});</TD></TR><TR><TD CLASS="l">728</TD><TD>                case SHORT: {</TD></TR><TR CLASS="c"><TD CLASS="l">729</TD><TD>                    int x = getShort();</TD></TR><TR CLASS="c"><TD CLASS="l">730</TD><TD>                    return ValueBytes.getNoCopy(new byte[]{</TD></TR><TR><TD CLASS="l">731</TD><TD>                            (byte) (x &gt;&gt; 8),</TD></TR><TR><TD CLASS="l">732</TD><TD>                            (byte) x</TD></TR><TR><TD CLASS="l">733</TD><TD>                    });</TD></TR><TR><TD CLASS="l">734</TD><TD>                }</TD></TR><TR><TD CLASS="l">735</TD><TD>                case INT: {</TD></TR><TR CLASS="c"><TD CLASS="l">736</TD><TD>                    int x = getInt();</TD></TR><TR CLASS="c"><TD CLASS="l">737</TD><TD>                    return ValueBytes.getNoCopy(new byte[]{</TD></TR><TR><TD CLASS="l">738</TD><TD>                            (byte) (x &gt;&gt; 24),</TD></TR><TR><TD CLASS="l">739</TD><TD>                            (byte) (x &gt;&gt; 16),</TD></TR><TR><TD CLASS="l">740</TD><TD>                            (byte) (x &gt;&gt; 8),</TD></TR><TR><TD CLASS="l">741</TD><TD>                            (byte) x</TD></TR><TR><TD CLASS="l">742</TD><TD>                    });</TD></TR><TR><TD CLASS="l">743</TD><TD>                }</TD></TR><TR><TD CLASS="l">744</TD><TD>                case LONG: {</TD></TR><TR CLASS="c"><TD CLASS="l">745</TD><TD>                    long x = getLong();</TD></TR><TR CLASS="c"><TD CLASS="l">746</TD><TD>                    return ValueBytes.getNoCopy(new byte[]{</TD></TR><TR><TD CLASS="l">747</TD><TD>                            (byte) (x &gt;&gt; 56),</TD></TR><TR><TD CLASS="l">748</TD><TD>                            (byte) (x &gt;&gt; 48),</TD></TR><TR><TD CLASS="l">749</TD><TD>                            (byte) (x &gt;&gt; 40),</TD></TR><TR><TD CLASS="l">750</TD><TD>                            (byte) (x &gt;&gt; 32),</TD></TR><TR><TD CLASS="l">751</TD><TD>                            (byte) (x &gt;&gt; 24),</TD></TR><TR><TD CLASS="l">752</TD><TD>                            (byte) (x &gt;&gt; 16),</TD></TR><TR><TD CLASS="l">753</TD><TD>                            (byte) (x &gt;&gt; 8),</TD></TR><TR><TD CLASS="l">754</TD><TD>                            (byte) x</TD></TR><TR><TD CLASS="l">755</TD><TD>                    });</TD></TR><TR><TD CLASS="l">756</TD><TD>                }</TD></TR><TR><TD CLASS="l">757</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">758</TD><TD>                break;</TD></TR><TR><TD CLASS="l">759</TD><TD>            }</TD></TR><TR><TD CLASS="l">760</TD><TD>            case JAVA_OBJECT: {</TD></TR><TR CLASS="c"><TD CLASS="l">761</TD><TD>                switch(getType()) {</TD></TR><TR><TD CLASS="l">762</TD><TD>                case BYTES:</TD></TR><TR><TD CLASS="l">763</TD><TD>                case BLOB:</TD></TR><TR CLASS="c"><TD CLASS="l">764</TD><TD>                    return ValueJavaObject.getNoCopy(null, getBytesNoCopy());</TD></TR><TR><TD CLASS="l">765</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">766</TD><TD>                break;</TD></TR><TR><TD CLASS="l">767</TD><TD>            }</TD></TR><TR><TD CLASS="l">768</TD><TD>            case BLOB: {</TD></TR><TR CLASS="c"><TD CLASS="l">769</TD><TD>                switch(getType()) {</TD></TR><TR><TD CLASS="l">770</TD><TD>                case BYTES:</TD></TR><TR><TD CLASS="l">771</TD><TD> </TD></TR><TR CLASS="c"><TD CLASS="l">772</TD><TD>                    return LobStorage.createSmallLob(Value.BLOB, getBytesNoCopy());</TD></TR><TR><TD CLASS="l">773</TD><TD>                }</TD></TR><TR CLASS="c"><TD CLASS="l">774</TD><TD>                break;</TD></TR><TR><TD CLASS="l">775</TD><TD>            }</TD></TR><TR><TD CLASS="l">776</TD><TD>            case UUID: {</TD></TR><TR CLASS="c"><TD CLASS="l">777</TD><TD>                switch(getType()) {</TD></TR><TR><TD CLASS="l">778</TD><TD>                case BYTES:</TD></TR><TR CLASS="z"><TD CLASS="l">779</TD><TD>                    return ValueUuid.get(getBytesNoCopy());</TD></TR><TR><TD CLASS="l">780</TD><TD>                }</TD></TR><TR><TD CLASS="l">781</TD><TD>            }</TD></TR><TR><TD CLASS="l">782</TD><TD>            }</TD></TR><TR><TD CLASS="l">783</TD><TD>            // conversion by parsing the string value</TD></TR><TR CLASS="c"><TD CLASS="l">784</TD><TD>            String s = getString();</TD></TR><TR CLASS="c"><TD CLASS="l">785</TD><TD>            switch (targetType) {</TD></TR><TR><TD CLASS="l">786</TD><TD>            case NULL:</TD></TR><TR CLASS="z"><TD CLASS="l">787</TD><TD>                return ValueNull.INSTANCE;</TD></TR><TR><TD CLASS="l">788</TD><TD>            case BOOLEAN: {</TD></TR><TR CLASS="c"><TD CLASS="l">789</TD><TD>                if (s.equalsIgnoreCase(&#34;true&#34;) ||</TD></TR><TR><TD CLASS="l">790</TD><TD>                        s.equalsIgnoreCase(&#34;t&#34;) ||</TD></TR><TR><TD CLASS="l">791</TD><TD>                        s.equalsIgnoreCase(&#34;yes&#34;) ||</TD></TR><TR><TD CLASS="l">792</TD><TD>                        s.equalsIgnoreCase(&#34;y&#34;)) {</TD></TR><TR CLASS="c"><TD CLASS="l">793</TD><TD>                    return ValueBoolean.get(true);</TD></TR><TR CLASS="c"><TD CLASS="l">794</TD><TD>                } else if (s.equalsIgnoreCase(&#34;false&#34;) ||</TD></TR><TR><TD CLASS="l">795</TD><TD>                        s.equalsIgnoreCase(&#34;f&#34;) ||</TD></TR><TR><TD CLASS="l">796</TD><TD>                        s.equalsIgnoreCase(&#34;no&#34;) ||</TD></TR><TR><TD CLASS="l">797</TD><TD>                        s.equalsIgnoreCase(&#34;n&#34;)) {</TD></TR><TR CLASS="c"><TD CLASS="l">798</TD><TD>                    return ValueBoolean.get(false);</TD></TR><TR><TD CLASS="l">799</TD><TD>                } else {</TD></TR><TR><TD CLASS="l">800</TD><TD>                    // convert to a number, and if it is not 0 then it is true</TD></TR><TR CLASS="c"><TD CLASS="l">801</TD><TD>                    return ValueBoolean.get(new BigDecimal(s).signum() != 0);</TD></TR><TR><TD CLASS="l">802</TD><TD>                }</TD></TR><TR><TD CLASS="l">803</TD><TD>            }</TD></TR><TR><TD CLASS="l">804</TD><TD>            case BYTE:</TD></TR><TR CLASS="c"><TD CLASS="l">805</TD><TD>                return ValueByte.get(Byte.parseByte(s.trim()));</TD></TR><TR><TD CLASS="l">806</TD><TD>            case SHORT:</TD></TR><TR CLASS="c"><TD CLASS="l">807</TD><TD>                return ValueShort.get(Short.parseShort(s.trim()));</TD></TR><TR><TD CLASS="l">808</TD><TD>            case INT:</TD></TR><TR CLASS="c"><TD CLASS="l">809</TD><TD>                return ValueInt.get(Integer.parseInt(s.trim()));</TD></TR><TR><TD CLASS="l">810</TD><TD>            case LONG:</TD></TR><TR CLASS="c"><TD CLASS="l">811</TD><TD>                return ValueLong.get(Long.parseLong(s.trim()));</TD></TR><TR><TD CLASS="l">812</TD><TD>            case DECIMAL:</TD></TR><TR CLASS="c"><TD CLASS="l">813</TD><TD>                return ValueDecimal.get(new BigDecimal(s.trim()));</TD></TR><TR><TD CLASS="l">814</TD><TD>            case TIME:</TD></TR><TR CLASS="c"><TD CLASS="l">815</TD><TD>                return ValueTime.parse(s.trim());</TD></TR><TR><TD CLASS="l">816</TD><TD>            case DATE:</TD></TR><TR CLASS="c"><TD CLASS="l">817</TD><TD>                return ValueDate.parse(s.trim());</TD></TR><TR><TD CLASS="l">818</TD><TD>            case TIMESTAMP:</TD></TR><TR CLASS="c"><TD CLASS="l">819</TD><TD>                return ValueTimestamp.parse(s.trim());</TD></TR><TR><TD CLASS="l">820</TD><TD>            case BYTES:</TD></TR><TR CLASS="c"><TD CLASS="l">821</TD><TD>                return ValueBytes.getNoCopy(StringUtils.convertHexToBytes(s.trim()));</TD></TR><TR><TD CLASS="l">822</TD><TD>            case JAVA_OBJECT:</TD></TR><TR CLASS="c"><TD CLASS="l">823</TD><TD>                return ValueJavaObject.getNoCopy(null, StringUtils.convertHexToBytes(s.trim()));</TD></TR><TR><TD CLASS="l">824</TD><TD>            case STRING:</TD></TR><TR CLASS="c"><TD CLASS="l">825</TD><TD>                return ValueString.get(s);</TD></TR><TR><TD CLASS="l">826</TD><TD>            case STRING_IGNORECASE:</TD></TR><TR CLASS="c"><TD CLASS="l">827</TD><TD>                return ValueStringIgnoreCase.get(s);</TD></TR><TR><TD CLASS="l">828</TD><TD>            case STRING_FIXED:</TD></TR><TR CLASS="c"><TD CLASS="l">829</TD><TD>                return ValueStringFixed.get(s);</TD></TR><TR><TD CLASS="l">830</TD><TD>            case DOUBLE:</TD></TR><TR CLASS="c"><TD CLASS="l">831</TD><TD>                return ValueDouble.get(Double.parseDouble(s.trim()));</TD></TR><TR><TD CLASS="l">832</TD><TD>            case FLOAT:</TD></TR><TR CLASS="c"><TD CLASS="l">833</TD><TD>                return ValueFloat.get(Float.parseFloat(s.trim()));</TD></TR><TR><TD CLASS="l">834</TD><TD>            case CLOB:</TD></TR><TR CLASS="c"><TD CLASS="l">835</TD><TD>                return LobStorage.createSmallLob(CLOB, StringUtils.utf8Encode(s));</TD></TR><TR><TD CLASS="l">836</TD><TD>            case BLOB:</TD></TR><TR CLASS="c"><TD CLASS="l">837</TD><TD>                return LobStorage.createSmallLob(BLOB, StringUtils.convertHexToBytes(s.trim()));</TD></TR><TR><TD CLASS="l">838</TD><TD>            case ARRAY:</TD></TR><TR CLASS="z"><TD CLASS="l">839</TD><TD>                return ValueArray.get(new Value[]{ValueString.get(s)});</TD></TR><TR><TD CLASS="l">840</TD><TD>            case RESULT_SET: {</TD></TR><TR CLASS="z"><TD CLASS="l">841</TD><TD>                SimpleResultSet rs = new SimpleResultSet();</TD></TR><TR CLASS="z"><TD CLASS="l">842</TD><TD>                rs.addColumn(&#34;X&#34;, Types.VARCHAR, s.length(), 0);</TD></TR><TR CLASS="z"><TD CLASS="l">843</TD><TD>                rs.addRow(s);</TD></TR><TR CLASS="z"><TD CLASS="l">844</TD><TD>                return ValueResultSet.get(rs);</TD></TR><TR><TD CLASS="l">845</TD><TD>            }</TD></TR><TR><TD CLASS="l">846</TD><TD>            case UUID:</TD></TR><TR CLASS="c"><TD CLASS="l">847</TD><TD>                return ValueUuid.get(s);</TD></TR><TR><TD CLASS="l">848</TD><TD>            default:</TD></TR><TR CLASS="z"><TD CLASS="l">849</TD><TD>                throw DbException.throwInternalError(&#34;type=&#34; + targetType);</TD></TR><TR><TD CLASS="l">850</TD><TD>            }</TD></TR><TR CLASS="c"><TD CLASS="l">851</TD><TD>        } catch (NumberFormatException e) {</TD></TR><TR CLASS="c"><TD CLASS="l">852</TD><TD>            throw DbException.get(ErrorCode.DATA_CONVERSION_ERROR_1, e, getString());</TD></TR><TR><TD CLASS="l">853</TD><TD>        }</TD></TR><TR><TD CLASS="l">854</TD><TD>    }</TD></TR><TR><TD CLASS="l">855</TD><TD> </TD></TR><TR><TD CLASS="l">856</TD><TD>    /**</TD></TR><TR><TD CLASS="l">857</TD><TD>     * Compare this value against another value given that the values are of the</TD></TR><TR><TD CLASS="l">858</TD><TD>     * same data type.</TD></TR><TR><TD CLASS="l">859</TD><TD>     *</TD></TR><TR><TD CLASS="l">860</TD><TD>     * @param v the other value</TD></TR><TR><TD CLASS="l">861</TD><TD>     * @param mode the compare mode</TD></TR><TR><TD CLASS="l"><A NAME="22">862</A></TD><TD>     * @return 0 if both values are equal, -1 if the other value is smaller, and</TD></TR><TR><TD CLASS="l">863</TD><TD>     *         1 otherwise</TD></TR><TR><TD CLASS="l">864</TD><TD>     */</TD></TR><TR><TD CLASS="l">865</TD><TD>    public final int compareTypeSave(Value v, CompareMode mode) {</TD></TR><TR CLASS="c"><TD CLASS="l">866</TD><TD>        if (this == v) {</TD></TR><TR CLASS="c"><TD CLASS="l">867</TD><TD>            return 0;</TD></TR><TR CLASS="c"><TD CLASS="l">868</TD><TD>        } else if (this == ValueNull.INSTANCE) {</TD></TR><TR CLASS="c"><TD CLASS="l">869</TD><TD>            return -1;</TD></TR><TR CLASS="c"><TD CLASS="l">870</TD><TD>        } else if (v == ValueNull.INSTANCE) {</TD></TR><TR CLASS="c"><TD CLASS="l">871</TD><TD>            return 1;</TD></TR><TR><TD CLASS="l">872</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">873</TD><TD>        return compareSecure(v, mode);</TD></TR><TR><TD CLASS="l">874</TD><TD>    }</TD></TR><TR><TD CLASS="l">875</TD><TD> </TD></TR><TR><TD CLASS="l">876</TD><TD>    /**</TD></TR><TR><TD CLASS="l">877</TD><TD>     * Compare this value against another value using the specified compare</TD></TR><TR><TD CLASS="l">878</TD><TD>     * mode.</TD></TR><TR><TD CLASS="l">879</TD><TD>     *</TD></TR><TR><TD CLASS="l">880</TD><TD>     * @param v the other value</TD></TR><TR><TD CLASS="l">881</TD><TD>     * @param mode the compare mode</TD></TR><TR><TD CLASS="l"><A NAME="1e">882</A></TD><TD>     * @return 0 if both values are equal, -1 if the other value is smaller, and</TD></TR><TR><TD CLASS="l">883</TD><TD>     *         1 otherwise</TD></TR><TR><TD CLASS="l">884</TD><TD>     */</TD></TR><TR><TD CLASS="l">885</TD><TD>    public final int compareTo(Value v, CompareMode mode) {</TD></TR><TR CLASS="c"><TD CLASS="l">886</TD><TD>        if (this == v) {</TD></TR><TR CLASS="c"><TD CLASS="l">887</TD><TD>            return 0;</TD></TR><TR><TD CLASS="l">888</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">889</TD><TD>        if (this == ValueNull.INSTANCE) {</TD></TR><TR CLASS="p"><TD CLASS="l" TITLE="71% line coverage (5 out of 7 instructions)">890</TD><TD TITLE="71% line coverage (5 out of 7 instructions)">            return v == ValueNull.INSTANCE ? 0 : -1;</TD></TR><TR CLASS="c"><TD CLASS="l">891</TD><TD>        } else if (v == ValueNull.INSTANCE) {</TD></TR><TR CLASS="c"><TD CLASS="l">892</TD><TD>            return 1;</TD></TR><TR><TD CLASS="l">893</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">894</TD><TD>        if (getType() == v.getType()) {</TD></TR><TR CLASS="c"><TD CLASS="l">895</TD><TD>            return compareSecure(v, mode);</TD></TR><TR><TD CLASS="l">896</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">897</TD><TD>        int t2 = Value.getHigherOrder(getType(), v.getType());</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="2e">898</A></TD><TD>        return convertTo(t2).compareSecure(v.convertTo(t2), mode);</TD></TR><TR><TD CLASS="l">899</TD><TD>    }</TD></TR><TR><TD CLASS="l">900</TD><TD> </TD></TR><TR><TD CLASS="l">901</TD><TD>    public int getScale() {</TD></TR><TR CLASS="c"><TD CLASS="l">902</TD><TD>        return 0;</TD></TR><TR><TD CLASS="l">903</TD><TD>    }</TD></TR><TR><TD CLASS="l">904</TD><TD> </TD></TR><TR><TD CLASS="l">905</TD><TD>    /**</TD></TR><TR><TD CLASS="l">906</TD><TD>     * Convert the scale.</TD></TR><TR><TD CLASS="l">907</TD><TD>     *</TD></TR><TR><TD CLASS="l">908</TD><TD>     * @param onlyToSmallerScale if the scale should not reduced</TD></TR><TR><TD CLASS="l"><A NAME="24">909</A></TD><TD>     * @param targetScale the requested scale</TD></TR><TR><TD CLASS="l">910</TD><TD>     * @return the value</TD></TR><TR><TD CLASS="l">911</TD><TD>     */</TD></TR><TR><TD CLASS="l">912</TD><TD>    public Value convertScale(boolean onlyToSmallerScale, int targetScale) {</TD></TR><TR CLASS="c"><TD CLASS="l">913</TD><TD>        return this;</TD></TR><TR><TD CLASS="l">914</TD><TD>    }</TD></TR><TR><TD CLASS="l">915</TD><TD> </TD></TR><TR><TD CLASS="l">916</TD><TD>    /**</TD></TR><TR><TD CLASS="l">917</TD><TD>     * Convert the precision to the requested value. The precision of the</TD></TR><TR><TD CLASS="l">918</TD><TD>     * returned value may be somewhat larger than requested, because values with</TD></TR><TR><TD CLASS="l">919</TD><TD>     * a fixed precision are not truncated.</TD></TR><TR><TD CLASS="l">920</TD><TD>     *</TD></TR><TR><TD CLASS="l">921</TD><TD>     * @param precision the new precision</TD></TR><TR><TD CLASS="l"><A NAME="23">922</A></TD><TD>     * @param force true if losing numeric precision is allowed</TD></TR><TR><TD CLASS="l">923</TD><TD>     * @return the new value</TD></TR><TR><TD CLASS="l">924</TD><TD>     */</TD></TR><TR><TD CLASS="l">925</TD><TD>    public Value convertPrecision(long precision, boolean force) {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="17">926</A></TD><TD>        return this;</TD></TR><TR><TD CLASS="l">927</TD><TD>    }</TD></TR><TR><TD CLASS="l">928</TD><TD> </TD></TR><TR><TD CLASS="l">929</TD><TD>    private static byte convertToByte(long x) {</TD></TR><TR CLASS="c"><TD CLASS="l">930</TD><TD>        if (x &gt; Byte.MAX_VALUE || x &lt; Byte.MIN_VALUE) {</TD></TR><TR CLASS="z"><TD CLASS="l">931</TD><TD>            throw DbException.get(ErrorCode.NUMERIC_VALUE_OUT_OF_RANGE_1, Long.toString(x));</TD></TR><TR><TD CLASS="l">932</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="18">933</A></TD><TD>        return (byte) x;</TD></TR><TR><TD CLASS="l">934</TD><TD>    }</TD></TR><TR><TD CLASS="l">935</TD><TD> </TD></TR><TR><TD CLASS="l">936</TD><TD>    private static short convertToShort(long x) {</TD></TR><TR CLASS="c"><TD CLASS="l">937</TD><TD>        if (x &gt; Short.MAX_VALUE || x &lt; Short.MIN_VALUE) {</TD></TR><TR CLASS="z"><TD CLASS="l">938</TD><TD>            throw DbException.get(ErrorCode.NUMERIC_VALUE_OUT_OF_RANGE_1, Long.toString(x));</TD></TR><TR><TD CLASS="l">939</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="15">940</A></TD><TD>        return (short) x;</TD></TR><TR><TD CLASS="l">941</TD><TD>    }</TD></TR><TR><TD CLASS="l">942</TD><TD> </TD></TR><TR><TD CLASS="l">943</TD><TD>    private static int convertToInt(long x) {</TD></TR><TR CLASS="c"><TD CLASS="l">944</TD><TD>        if (x &gt; Integer.MAX_VALUE || x &lt; Integer.MIN_VALUE) {</TD></TR><TR CLASS="z"><TD CLASS="l">945</TD><TD>            throw DbException.get(ErrorCode.NUMERIC_VALUE_OUT_OF_RANGE_1, Long.toString(x));</TD></TR><TR><TD CLASS="l">946</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="16">947</A></TD><TD>        return (int) x;</TD></TR><TR><TD CLASS="l">948</TD><TD>    }</TD></TR><TR><TD CLASS="l">949</TD><TD> </TD></TR><TR><TD CLASS="l">950</TD><TD>    private static long convertToLong(double x) {</TD></TR><TR CLASS="c"><TD CLASS="l">951</TD><TD>        if (x &gt; Long.MAX_VALUE || x &lt; Long.MIN_VALUE) {</TD></TR><TR><TD CLASS="l">952</TD><TD>            // TODO document that +Infinity, -Infinity throw an exception and NaN returns 0</TD></TR><TR CLASS="z"><TD CLASS="l">953</TD><TD>            throw DbException.get(ErrorCode.NUMERIC_VALUE_OUT_OF_RANGE_1, Double.toString(x));</TD></TR><TR><TD CLASS="l">954</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="25">955</A></TD><TD>        return Math.round(x);</TD></TR><TR><TD CLASS="l">956</TD><TD>    }</TD></TR><TR><TD CLASS="l">957</TD><TD> </TD></TR><TR><TD CLASS="l">958</TD><TD>    private static long convertToLong(BigDecimal x) {</TD></TR><TR CLASS="c"><TD CLASS="l">959</TD><TD>        if (x.compareTo(MAX_LONG_DECIMAL) &gt; 0 || x.compareTo(Value.MIN_LONG_DECIMAL) &lt; 0) {</TD></TR><TR CLASS="c"><TD CLASS="l">960</TD><TD>            throw DbException.get(ErrorCode.NUMERIC_VALUE_OUT_OF_RANGE_1, x.toString());</TD></TR><TR><TD CLASS="l">961</TD><TD>        }</TD></TR><TR CLASS="c"><TD CLASS="l">962</TD><TD>        return x.setScale(0, BigDecimal.ROUND_HALF_UP).longValue();</TD></TR><TR><TD CLASS="l">963</TD><TD>    }</TD></TR><TR><TD CLASS="l">964</TD><TD> </TD></TR><TR><TD CLASS="l">965</TD><TD>    /**</TD></TR><TR><TD CLASS="l">966</TD><TD>     * Link a large value to a given table. For values that are kept fully in</TD></TR><TR><TD CLASS="l">967</TD><TD>     * memory this method has no effect.</TD></TR><TR><TD CLASS="l">968</TD><TD>     *</TD></TR><TR><TD CLASS="l">969</TD><TD>     * @param handler the data handler</TD></TR><TR><TD CLASS="l"><A NAME="32">970</A></TD><TD>     * @param tableId the table to link to</TD></TR><TR><TD CLASS="l">971</TD><TD>     * @return the new value or itself</TD></TR><TR><TD CLASS="l">972</TD><TD>     */</TD></TR><TR><TD CLASS="l">973</TD><TD>    public Value link(DataHandler handler, int tableId) {</TD></TR><TR CLASS="c"><TD CLASS="l">974</TD><TD>        return this;</TD></TR><TR><TD CLASS="l">975</TD><TD>    }</TD></TR><TR><TD CLASS="l">976</TD><TD> </TD></TR><TR><TD CLASS="l">977</TD><TD>    /**</TD></TR><TR><TD CLASS="l">978</TD><TD>     * Check if this value is linked to a specific table. For values that are</TD></TR><TR><TD CLASS="l">979</TD><TD>     * kept fully in memory, this method returns false.</TD></TR><TR><TD CLASS="l"><A NAME="31">980</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">981</TD><TD>     * @return true if it is</TD></TR><TR><TD CLASS="l">982</TD><TD>     */</TD></TR><TR><TD CLASS="l">983</TD><TD>    public boolean isLinked() {</TD></TR><TR CLASS="c"><TD CLASS="l">984</TD><TD>        return false;</TD></TR><TR><TD CLASS="l">985</TD><TD>    }</TD></TR><TR><TD CLASS="l">986</TD><TD> </TD></TR><TR><TD CLASS="l">987</TD><TD>    /**</TD></TR><TR><TD CLASS="l">988</TD><TD>     * Mark any underlying resource as 'not linked to any table'. For values</TD></TR><TR><TD CLASS="l"><A NAME="34">989</A></TD><TD>     * that are kept fully in memory this method has no effect.</TD></TR><TR><TD CLASS="l">990</TD><TD>     */</TD></TR><TR><TD CLASS="l">991</TD><TD>    public void unlink() {</TD></TR><TR><TD CLASS="l">992</TD><TD>        // nothing to do</TD></TR><TR CLASS="c"><TD CLASS="l">993</TD><TD>    }</TD></TR><TR><TD CLASS="l">994</TD><TD> </TD></TR><TR><TD CLASS="l">995</TD><TD>    /**</TD></TR><TR><TD CLASS="l">996</TD><TD>     * Close the underlying resource, if any. For values that are kept fully in</TD></TR><TR><TD CLASS="l"><A NAME="21">997</A></TD><TD>     * memory this method has no effect.</TD></TR><TR><TD CLASS="l">998</TD><TD>     */</TD></TR><TR><TD CLASS="l">999</TD><TD>    public void close() {</TD></TR><TR><TD CLASS="l">1000</TD><TD>        // nothing to do</TD></TR><TR CLASS="c"><TD CLASS="l">1001</TD><TD>    }</TD></TR><TR><TD CLASS="l">1002</TD><TD> </TD></TR><TR><TD CLASS="l">1003</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1004</TD><TD>     * Check if the precision is smaller or equal than the given precision.</TD></TR><TR><TD CLASS="l">1005</TD><TD>     *</TD></TR><TR><TD CLASS="l">1006</TD><TD>     * @param precision the maximum precision</TD></TR><TR><TD CLASS="l"><A NAME="1c">1007</A></TD><TD>     * @return true if the precision of this value is smaller or equal to the</TD></TR><TR><TD CLASS="l">1008</TD><TD>     *         given precision</TD></TR><TR><TD CLASS="l">1009</TD><TD>     */</TD></TR><TR><TD CLASS="l">1010</TD><TD>    public boolean checkPrecision(long precision) {</TD></TR><TR CLASS="p"><TD CLASS="l" TITLE="89% line coverage (8 out of 9 instructions)">1011</TD><TD TITLE="89% line coverage (8 out of 9 instructions)">        return getPrecision() &lt;= precision;</TD></TR><TR><TD CLASS="l">1012</TD><TD>    }</TD></TR><TR><TD CLASS="l">1013</TD><TD> </TD></TR><TR><TD CLASS="l">1014</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1015</TD><TD>     * Get a medium size SQL expression for debugging or tracing. If the precision is</TD></TR><TR><TD CLASS="l">1016</TD><TD>     * too large, only a subset of the value is returned.</TD></TR><TR><TD CLASS="l"><A NAME="30">1017</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">1018</TD><TD>     * @return the SQL expression</TD></TR><TR><TD CLASS="l">1019</TD><TD>     */</TD></TR><TR><TD CLASS="l">1020</TD><TD>    public String getTraceSQL() {</TD></TR><TR CLASS="c"><TD CLASS="l"><A NAME="33">1021</A></TD><TD>        return getSQL();</TD></TR><TR><TD CLASS="l">1022</TD><TD>    }</TD></TR><TR><TD CLASS="l">1023</TD><TD> </TD></TR><TR><TD CLASS="l">1024</TD><TD>    public String toString() {</TD></TR><TR CLASS="c"><TD CLASS="l">1025</TD><TD>        return getTraceSQL();</TD></TR><TR><TD CLASS="l">1026</TD><TD>    }</TD></TR><TR><TD CLASS="l">1027</TD><TD> </TD></TR><TR><TD CLASS="l">1028</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1029</TD><TD>     * Throw the exception that the feature is not support for the given data type.</TD></TR><TR><TD CLASS="l">1030</TD><TD>     *</TD></TR><TR><TD CLASS="l">1031</TD><TD>     * @param op the operation</TD></TR><TR><TD CLASS="l"><A NAME="14">1032</A></TD><TD>     * @return never returns normally</TD></TR><TR><TD CLASS="l">1033</TD><TD>     * @throws DbException the exception</TD></TR><TR><TD CLASS="l">1034</TD><TD>     */</TD></TR><TR><TD CLASS="l">1035</TD><TD>    protected DbException throwUnsupportedExceptionForType(String op) {</TD></TR><TR CLASS="z"><TD CLASS="l">1036</TD><TD>        throw DbException.getUnsupportedException(DataType.getDataType(getType()).name + &#34; &#34; + op);</TD></TR><TR><TD CLASS="l">1037</TD><TD>    }</TD></TR><TR><TD CLASS="l">1038</TD><TD> </TD></TR><TR><TD CLASS="l">1039</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1040</TD><TD>     * Get the table (only for LOB object).</TD></TR><TR><TD CLASS="l"><A NAME="e">1041</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">1042</TD><TD>     * @return the table id</TD></TR><TR><TD CLASS="l">1043</TD><TD>     */</TD></TR><TR><TD CLASS="l">1044</TD><TD>    public int getTableId() {</TD></TR><TR CLASS="z"><TD CLASS="l">1045</TD><TD>        return 0;</TD></TR><TR><TD CLASS="l">1046</TD><TD>    }</TD></TR><TR><TD CLASS="l">1047</TD><TD> </TD></TR><TR><TD CLASS="l">1048</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1049</TD><TD>     * Get the byte array.</TD></TR><TR><TD CLASS="l"><A NAME="d">1050</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">1051</TD><TD>     * @return the byte array</TD></TR><TR><TD CLASS="l">1052</TD><TD>     */</TD></TR><TR><TD CLASS="l">1053</TD><TD>    public byte[] getSmall() {</TD></TR><TR CLASS="z"><TD CLASS="l">1054</TD><TD>        return null;</TD></TR><TR><TD CLASS="l">1055</TD><TD>    }</TD></TR><TR><TD CLASS="l">1056</TD><TD> </TD></TR><TR><TD CLASS="l">1057</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1058</TD><TD>     * Copy this value to a temporary file if necessary.</TD></TR><TR><TD CLASS="l"><A NAME="3">1059</A></TD><TD>     *</TD></TR><TR><TD CLASS="l">1060</TD><TD>     * @return the new value</TD></TR><TR><TD CLASS="l">1061</TD><TD>     */</TD></TR><TR><TD CLASS="l">1062</TD><TD>    public Value copyToTemp() {</TD></TR><TR CLASS="z"><TD CLASS="l"><A NAME="2d">1063</A></TD><TD>        return this;</TD></TR><TR><TD CLASS="l">1064</TD><TD>    }</TD></TR><TR><TD CLASS="l">1065</TD><TD> </TD></TR><TR><TD CLASS="l">1066</TD><TD>    public ResultSet getResultSet() {</TD></TR><TR CLASS="c"><TD CLASS="l">1067</TD><TD>        SimpleResultSet rs = new SimpleResultSet();</TD></TR><TR CLASS="c"><TD CLASS="l">1068</TD><TD>        rs.addColumn(&#34;X&#34;, DataType.convertTypeToSQLType(getType()), MathUtils.convertLongToInt(getPrecision()), getScale());</TD></TR><TR CLASS="c"><TD CLASS="l">1069</TD><TD>        rs.addRow(getObject());</TD></TR><TR CLASS="c"><TD CLASS="l">1070</TD><TD>        return rs;</TD></TR><TR><TD CLASS="l">1071</TD><TD>    }</TD></TR><TR><TD CLASS="l">1072</TD><TD> </TD></TR><TR><TD CLASS="l">1073</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1074</TD><TD>     * A &#34;binary large object&#34;.</TD></TR><TR><TD CLASS="l">1075</TD><TD>     */</TD></TR><TR><TD CLASS="l">1076</TD><TD>    public interface ValueClob {</TD></TR><TR><TD CLASS="l">1077</TD><TD>        // this is a marker interface</TD></TR><TR><TD CLASS="l">1078</TD><TD>    }</TD></TR><TR><TD CLASS="l">1079</TD><TD> </TD></TR><TR><TD CLASS="l">1080</TD><TD>    /**</TD></TR><TR><TD CLASS="l">1081</TD><TD>     * A &#34;character large object&#34;.</TD></TR><TR><TD CLASS="l">1082</TD><TD>     */</TD></TR><TR CLASS="c"><TD CLASS="l">1083</TD><TD>    public interface ValueBlob {</TD></TR><TR><TD CLASS="l">1084</TD><TD>        // this is a marker interface</TD></TR><TR><TD CLASS="l">1085</TD><TD>    }</TD></TR><TR><TD CLASS="l">1086</TD><TD> </TD></TR><TR><TD CLASS="l">1087</TD><TD>}</TD></TR></TABLE><P></P><TABLE CLASS="hdft" CELLSPACING="0" WIDTH="100%"><TR><TD CLASS="nv">[<A HREF="../index.html">all classes</A>][<A HREF="7.html">org.h2.value</A>]</TD></TR><TR><TD CLASS="tl"><A HREF="http://sourceforge.net/projects/emma">EMMA 2.0.5312</A> (C) Vladimir Roubtsov</TD></TR></TABLE></BODY></HTML>